{
  "name": "_Fabula Ultima NPC template",
  "type": "_template",
  "system": {
    "hidden": [],
    "header": {
      "contents": [
        {
          "key": "",
          "cssClass": "",
          "role": "0",
          "permission": "0",
          "tooltip": "",
          "visibilityFormula": "",
          "contents": [
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "life-icon",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "Health Points",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "small",
                      "icon": "",
                      "value": "",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "subtitle",
                      "type": "label"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "char-attribute-text no-margin",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<span style=\"color:#f20012; text-decoration: underline;\"> Health<span>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "hp_current",
                              "cssClass": "npc_alt_text_field_background",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "0",
                              "size": "full-size",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "${ref('hp_max')}$",
                              "allowRelative": true,
                              "showControls": true,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "hp_max",
                              "cssClass": "npc_alt_text_field_background",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "/",
                              "defaultValue": "0",
                              "size": "full-size",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "center",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    }
                  ],
                  "flow": "horizontal",
                  "align": "center",
                  "type": "panel"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "mana-icon",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "Mind Point",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "small",
                      "icon": "",
                      "value": "",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "subtitle",
                      "type": "label"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "char-attribute-text no-margin",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<span style=\"color:#6fa1f8; text-decoration: underline;\"> Magic<span>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "mp_current",
                              "cssClass": "npc_alt_text_field_background",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "0",
                              "size": "full-size",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "${ref('mp_max')}$",
                              "allowRelative": true,
                              "showControls": true,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "mp_max",
                              "cssClass": "npc_alt_text_field_background",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "/",
                              "defaultValue": "0",
                              "size": "full-size",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "center",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    }
                  ],
                  "flow": "horizontal",
                  "align": "center",
                  "type": "panel"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "init-icon",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "Initiative",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "small",
                      "icon": "",
                      "value": "",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "subtitle",
                      "type": "label"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "char-attribute-text no-margin",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<span style=\"color:#eab359; text-decoration: underline;\";>Init.</span>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "init",
                              "cssClass": "npc_alt_text_field_background",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "0",
                              "size": "full-size",
                              "allowDecimal": false,
                              "minVal": "",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    }
                  ],
                  "flow": "horizontal",
                  "align": "center",
                  "type": "panel"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "fp-icon",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "Fabula Points",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "small",
                      "icon": "",
                      "value": "",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "subtitle",
                      "type": "label"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "char-attribute-text no-margin",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<span style=\"color:#adad7b; text-decoration: underline;\";>Ultima</span> ",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "fp",
                              "cssClass": "npc_alt_text_field_background",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "0",
                              "size": "small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": true,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    }
                  ],
                  "flow": "horizontal",
                  "align": "center",
                  "type": "panel"
                }
              ],
              "flow": "grid-4",
              "align": "center",
              "type": "panel"
            }
          ],
          "flow": "vertical",
          "align": "center",
          "type": "panel"
        }
      ],
      "key": "custom_header",
      "cssClass": null,
      "role": 0,
      "permission": 0,
      "tooltip": null,
      "flow": null,
      "align": null,
      "type": "panel",
      "visibilityFormula": null
    },
    "body": {
      "contents": [
        {
          "key": "",
          "cssClass": "npc_quote_table",
          "role": "0",
          "permission": "0",
          "tooltip": "",
          "visibilityFormula": "",
          "contents": [
            [
              {
                "key": "desc",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "label": "",
                "defaultValue": "<p>Description here.</p>",
                "size": null,
                "style": "dialog",
                "type": "textArea"
              },
              {
                "key": "",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": null,
                "contents": [
                  {
                    "key": "level",
                    "cssClass": "npc_alt_text_field_background",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "label": "Lv",
                    "defaultValue": "5",
                    "size": "small",
                    "allowDecimal": false,
                    "minVal": "5",
                    "maxVal": "60",
                    "allowRelative": false,
                    "showControls": false,
                    "controlsStyle": "hover",
                    "type": "numberField"
                  }
                ],
                "flow": "vertical",
                "align": "center",
                "type": "panel"
              },
              {
                "key": "species",
                "cssClass": "npc_alt_text_field_background",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "label": "",
                "defaultValue": "BEAST",
                "size": "medium",
                "options": [
                  {
                    "key": "BEAST",
                    "value": "BEAST"
                  },
                  {
                    "key": "CONSTRUCT",
                    "value": "CONSTRUCT"
                  },
                  {
                    "key": "DEMON",
                    "value": "DEMON"
                  },
                  {
                    "key": "ELEMENTAL",
                    "value": "ELEMENTAL"
                  },
                  {
                    "key": "HUMANOID",
                    "value": "HUMANOID"
                  },
                  {
                    "key": "MONSTER",
                    "value": "MONSTER"
                  },
                  {
                    "key": "PLANT",
                    "value": "PLANT"
                  },
                  {
                    "key": "UNDEAD",
                    "value": "UNDEAD"
                  }
                ],
                "tableKey": null,
                "tableKeyColumn": null,
                "tableLabelColumn": null,
                "formulaKeyOptions": null,
                "formulaLabelOptions": null,
                "type": "select"
              }
            ]
          ],
          "cols": "3",
          "rows": "1",
          "layout": "",
          "type": "table"
        },
        {
          "key": "",
          "cssClass": "",
          "role": "0",
          "permission": "0",
          "tooltip": "",
          "visibilityFormula": "",
          "contents": [
            {
              "key": "",
              "cssClass": "npc-font-color",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "label": null,
              "defaultValue": null,
              "size": "m-small",
              "icon": "",
              "value": "<i class=\"fa-solid fa-pegasus\"> Traits</i>",
              "prefix": "",
              "suffix": "",
              "rollMessage": "",
              "altRollMessage": "",
              "style": "label",
              "type": "label"
            },
            {
              "key": "traits",
              "cssClass": "npc_alt_text_field_background align-left",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "label": "",
              "defaultValue": "",
              "size": "full-size",
              "charList": "",
              "maxLength": "",
              "type": "textField"
            }
          ],
          "flow": "horizontal",
          "align": "left",
          "type": "panel"
        },
        {
          "key": "def_attr_tbl",
          "cssClass": "npc_header_block",
          "role": "0",
          "permission": "0",
          "tooltip": "",
          "visibilityFormula": "",
          "contents": [
            [
              {
                "key": "",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "contents": [
                  {
                    "key": "total_def",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "label": null,
                    "defaultValue": null,
                    "size": "full-size",
                    "icon": "fa-solid fa-shield",
                    "value": "${(is_martialarmor ? 0 : ref('dex_current')) + ref('mod_def') + ref('bonus_def') + sum(fetchFromDynamicTable('equipment_table', 'custom_weapon_def', 'is_equipped', true))}$\n\n",
                    "prefix": "Defense: ",
                    "suffix": "",
                    "rollMessage": "",
                    "altRollMessage": "",
                    "style": "bold",
                    "type": "label"
                  },
                  {
                    "key": "total_mdef",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "label": null,
                    "defaultValue": null,
                    "size": "full-size",
                    "icon": "fa-solid fa-shield-halved",
                    "value": "${ref('ins_current')+ ref('mod_mdef') + ref('bonus_mdef') + sum(fetchFromDynamicTable('equipment_table', 'custom_weapon_mdef', 'is_equipped', true))}$",
                    "prefix": "Magic defense: ",
                    "suffix": "",
                    "rollMessage": "",
                    "altRollMessage": "",
                    "style": "bold",
                    "type": "label"
                  }
                ],
                "flow": "grid-2",
                "align": "center",
                "type": "panel"
              }
            ]
          ],
          "cols": "1",
          "rows": "1",
          "layout": "",
          "type": "table"
        },
        {
          "key": "tab_table",
          "cssClass": "npc_tab_content_background ",
          "role": "0",
          "permission": "0",
          "tooltip": "",
          "visibilityFormula": "",
          "contents": [
            [
              {
                "key": "",
                "cssClass": "npc_nav_header_bar ",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "contents": [
                  {
                    "key": "stats",
                    "cssClass": null,
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": null,
                    "contents": [
                      {
                        "key": "",
                        "cssClass": "npc_tab_content tab_background",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "",
                        "contents": [
                          {
                            "key": "",
                            "cssClass": "",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "contents": [
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "medium",
                                "icon": "",
                                "value": "<i class=\"fa-solid fa-head-side\"> \n Attributes</i>",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "bold",
                                "type": "label"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "m-small",
                                    "icon": "",
                                    "value": "<i class=\"fa-solid fa-dice-d20\"> Base</i>",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "bold",
                                    "type": "label"
                                  }
                                ],
                                "flow": "vertical",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "Bonus defense and magic defense.",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "medium",
                                    "icon": "",
                                    "value": "<i class=\"fa-solid fa-shield-quartered\"> Defenses</i>",
                                    "prefix": "",
                                    "suffix": "   <i class=\"fa-solid fa-circle-question\"></i>",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "bold",
                                    "type": "label"
                                  }
                                ],
                                "flow": "vertical",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "Current attribute value after modified by statuses, buffs and debuffs.",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "medium",
                                    "icon": "",
                                    "value": "<i class=\"fa-solid fa-feather\"> Current</i>",
                                    "prefix": "",
                                    "suffix": "   <i class=\"fa-solid fa-circle-question\"></i>",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "bold",
                                    "type": "label"
                                  }
                                ],
                                "flow": "vertical",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "Dexterity: measures precision, coordination, finesse, reflexes. Affects DEF.",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "",
                                "value": "<i class=\"fa-solid fa-person-running\"> DEX</i>",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "bold",
                                "type": "label"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "dex_base",
                                    "cssClass": "alt_text_field_background",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": "d",
                                    "defaultValue": "8",
                                    "size": "small",
                                    "options": [
                                      {
                                        "key": "6",
                                        "value": "6"
                                      },
                                      {
                                        "key": "8",
                                        "value": "8"
                                      },
                                      {
                                        "key": "10",
                                        "value": "10"
                                      },
                                      {
                                        "key": "12",
                                        "value": "12"
                                      }
                                    ],
                                    "tableKey": null,
                                    "tableKeyColumn": null,
                                    "tableLabelColumn": null,
                                    "formulaKeyOptions": null,
                                    "formulaLabelOptions": null,
                                    "type": "select"
                                  }
                                ],
                                "flow": "vertical",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "x-small",
                                    "icon": "",
                                    "value": "<i class=\"fa-solid fa-arrow-right\"></i>",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  },
                                  {
                                    "key": "bonus_def",
                                    "cssClass": "alt_text_field_background",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": "",
                                    "defaultValue": "0",
                                    "size": "small",
                                    "allowDecimal": false,
                                    "minVal": "",
                                    "maxVal": "",
                                    "allowRelative": false,
                                    "showControls": true,
                                    "controlsStyle": "hover",
                                    "type": "numberField"
                                  }
                                ],
                                "flow": "horizontal",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "dex_current",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "x-small",
                                    "icon": "",
                                    "value": "${ref('dex_mod')< 6 ? 6: ref('dex_mod')> 12 ? 12:ref('dex_mod')}$\n",
                                    "prefix": "d",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "bold",
                                    "type": "label"
                                  }
                                ],
                                "flow": "vertical",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "Insight: observation, understanding, reasoning. Affects MDEF.",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "",
                                "value": "<i class=\"fa-solid fa-book\"> INS</i>",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "bold",
                                "type": "label"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "ins_base",
                                    "cssClass": "alt_text_field_background",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": "d",
                                    "defaultValue": "8",
                                    "size": "small",
                                    "options": [
                                      {
                                        "key": "6",
                                        "value": "6"
                                      },
                                      {
                                        "key": "8",
                                        "value": "8"
                                      },
                                      {
                                        "key": "10",
                                        "value": "10"
                                      },
                                      {
                                        "key": "12",
                                        "value": "12"
                                      }
                                    ],
                                    "tableKey": null,
                                    "tableKeyColumn": null,
                                    "tableLabelColumn": null,
                                    "formulaKeyOptions": null,
                                    "formulaLabelOptions": null,
                                    "type": "select"
                                  }
                                ],
                                "flow": "vertical",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "x-small",
                                    "icon": "",
                                    "value": "<i class=\"fa-solid fa-arrow-right\"></i>",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  },
                                  {
                                    "key": "bonus_mdef",
                                    "cssClass": "alt_text_field_background",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": "",
                                    "defaultValue": "0",
                                    "size": "small",
                                    "allowDecimal": false,
                                    "minVal": "",
                                    "maxVal": "",
                                    "allowRelative": false,
                                    "showControls": true,
                                    "controlsStyle": "hover",
                                    "type": "numberField"
                                  }
                                ],
                                "flow": "horizontal",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "ins_current",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "x-small",
                                    "icon": "",
                                    "value": "${ref('ins_mod')< 6 ? 6: ref('ins_mod')> 12 ? 12:ref('ins_mod')}$\n",
                                    "prefix": "d",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "bold",
                                    "type": "label"
                                  }
                                ],
                                "flow": "vertical",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "Might: strength, fortitude. Affects max HP.",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "",
                                "value": "<i class=\"fa-solid fa-dumbbell\"> MIG</i>",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "bold",
                                "type": "label"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "mig_base",
                                    "cssClass": "alt_text_field_background",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": "d",
                                    "defaultValue": "8",
                                    "size": "small",
                                    "options": [
                                      {
                                        "key": "6",
                                        "value": "6"
                                      },
                                      {
                                        "key": "8",
                                        "value": "8"
                                      },
                                      {
                                        "key": "10",
                                        "value": "10"
                                      },
                                      {
                                        "key": "12",
                                        "value": "12"
                                      }
                                    ],
                                    "tableKey": null,
                                    "tableKeyColumn": null,
                                    "tableLabelColumn": null,
                                    "formulaKeyOptions": null,
                                    "formulaLabelOptions": null,
                                    "type": "select"
                                  }
                                ],
                                "flow": "vertical",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [],
                                "flow": "horizontal",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "mig_current",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "x-small",
                                    "icon": "",
                                    "value": "${ref('mig_mod')< 6 ? 6: ref('mig_mod')> 12 ? 12:ref('mig_mod')}$\n",
                                    "prefix": "d",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "bold",
                                    "type": "label"
                                  }
                                ],
                                "flow": "vertical",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "Willpower: determination, charisma, discipline. Affects max MP.",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "",
                                "value": "<i class=\"fa-solid  fa-comment\"> WLP</i>",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "bold",
                                "type": "label"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "wlp_base",
                                    "cssClass": "alt_text_field_background",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": "d",
                                    "defaultValue": "8",
                                    "size": "small",
                                    "options": [
                                      {
                                        "key": "6",
                                        "value": "6"
                                      },
                                      {
                                        "key": "8",
                                        "value": "8"
                                      },
                                      {
                                        "key": "10",
                                        "value": "10"
                                      },
                                      {
                                        "key": "12",
                                        "value": "12"
                                      }
                                    ],
                                    "tableKey": null,
                                    "tableKeyColumn": null,
                                    "tableLabelColumn": null,
                                    "formulaKeyOptions": null,
                                    "formulaLabelOptions": null,
                                    "type": "select"
                                  }
                                ],
                                "flow": "vertical",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [],
                                "flow": "horizontal",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "wlp_current",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "x-small",
                                    "icon": "",
                                    "value": "${ref('wlp_mod')< 6 ? 6: ref('wlp_mod')> 12 ? 12:ref('wlp_mod')}$\n",
                                    "prefix": "d",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "bold",
                                    "type": "label"
                                  }
                                ],
                                "flow": "vertical",
                                "align": "center",
                                "type": "panel"
                              }
                            ],
                            "flow": "grid-4",
                            "align": "center",
                            "type": "panel"
                          },
                          {
                            "key": "",
                            "cssClass": "",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": null,
                            "contents": [
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "You need to setup the active effects to apply status effects. Please check the wiki for more information.",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "",
                                "value": "<i class=\"fa-solid fa-skull-crossbones\"> Status Effects</i>",
                                "prefix": "",
                                "suffix": "   <i class=\"fa-solid fa-circle-question\"></i>",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "bold",
                                "type": "label"
                              },
                              {
                                "key": "status_effects",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": null,
                                "contents": [
                                  {
                                    "key": "isSlow",
                                    "cssClass": "npc-font-color",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "Temporarily reduces your Dexterity die size by one.",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "<i class=\"fa-solid fa-square\" style=\"color:Gray\"> Slow</i>",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  },
                                  {
                                    "key": "isDazed",
                                    "cssClass": "npc-font-color",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "Temporarily reduces your Insight die size by one.",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "<i class=\"fa-solid fa-square\" style=\"color:Gray\"> Dazed</i>",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  },
                                  {
                                    "key": "isWeak",
                                    "cssClass": "npc-font-color",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "Temporarily reduces your Might die size by one.",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "<i class=\"fa-solid fa-square\" style=\"color:Gray\"> Weak</i>",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  },
                                  {
                                    "key": "isShaken",
                                    "cssClass": "npc-font-color",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "Temporarily reduces your Willpower die size by one.",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "<i class=\"fa-solid fa-square\" style=\"color:Gray\"> Shaken</i>",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  },
                                  {
                                    "key": "isEnraged",
                                    "cssClass": "npc-font-color",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "Temporarily reduces your Dexterity and Insight die sizes by one.",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "<i class=\"fa-solid fa-square\" style=\"color:Gray\"> Enraged</i>",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  },
                                  {
                                    "key": "isPoisoned",
                                    "cssClass": "npc-font-color",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "Temporarily reduces your Might and Willpower die sizes by one.",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "<i class=\"fa-solid fa-square\"  style=\"color:Gray\"> Poisoned</i>",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  }
                                ],
                                "flow": "grid-2",
                                "align": "justify",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "<i class=\"fa-solid fa-dice-d20\"> Dice checks</i>",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  },
                                  {
                                    "key": "",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  }
                                ],
                                "flow": "vertical",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "check_roller",
                                    "cssClass": "npc-font-color",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "m-small",
                                    "icon": "dice",
                                    "value": "Roll!",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "<h2>Rolling a ${!rolled_atr1}$ + ${!rolled_atr2}$ Check </h2>\n\n${#dice1:= equalText(string(rolled_atr1) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(rolled_atr1) ,'INS') == true and isZero(dice1) == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(rolled_atr1) ,'MIG') == true and isZero(dice1) == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(rolled_atr1) ,'WLP') == true and isZero(dice1) == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(rolled_atr2) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(rolled_atr2) ,'INS') == true and isZero(dice2) == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(rolled_atr2) ,'MIG') == true and isZero(dice2) == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(rolled_atr2) ,'WLP') == true and isZero(dice2) == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(rolled_atr1)}$</b> = 1d${!dice1}$ = ${D1:=[1d:dice1:]}$</p>\n\n<p><b>${!string(rolled_atr2)}$</b> = 1d${!dice2}$ = ${D2:=[1d:dice2:]}$</p>\n\n<p><strong>Result: ${D1+D2}$ HR: ${max(D1, D2)}$</strong></p>\n\n${! largerEq(D1, 6) and D1 == D2 ? string('<p><b>CRITICAL SUCCESS! Gain an Opportunity</b></p>'): string('')}$\n\n${!D1 == D2 and D1 == 1 ? string('<p><b>FUMBLE<b></p>'): string('')}$",
                                    "altRollMessage": "",
                                    "style": "title",
                                    "type": "label"
                                  },
                                  {
                                    "key": "rolled_atr1",
                                    "cssClass": "alt_text_field_background",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": "",
                                    "defaultValue": "DEX",
                                    "size": "m-small",
                                    "options": [
                                      {
                                        "key": "DEX",
                                        "value": "DEX"
                                      },
                                      {
                                        "key": "INS",
                                        "value": "INS"
                                      },
                                      {
                                        "key": "MIG",
                                        "value": "MIG"
                                      },
                                      {
                                        "key": "WLP",
                                        "value": "WLP"
                                      }
                                    ],
                                    "tableKey": null,
                                    "tableKeyColumn": null,
                                    "tableLabelColumn": null,
                                    "formulaKeyOptions": null,
                                    "formulaLabelOptions": null,
                                    "type": "select"
                                  },
                                  {
                                    "key": "rolled_atr2",
                                    "cssClass": "alt_text_field_background",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": "",
                                    "defaultValue": "DEX",
                                    "size": "m-small",
                                    "options": [
                                      {
                                        "key": "DEX",
                                        "value": "DEX"
                                      },
                                      {
                                        "key": "INS",
                                        "value": "INS"
                                      },
                                      {
                                        "key": "MIG",
                                        "value": "MIG"
                                      },
                                      {
                                        "key": "WLP",
                                        "value": "WLP"
                                      }
                                    ],
                                    "tableKey": null,
                                    "tableKeyColumn": null,
                                    "tableLabelColumn": null,
                                    "formulaKeyOptions": null,
                                    "formulaLabelOptions": null,
                                    "type": "select"
                                  }
                                ],
                                "flow": "horizontal",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "npc-hidding-mod-atr",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "dex_mod",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "${ref('dex_base')}$",
                                    "prefix": "Dex : ",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  },
                                  {
                                    "key": "ins_mod",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "${ref('ins_base')}$",
                                    "prefix": "Ins : ",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  },
                                  {
                                    "key": "mig_mod",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "${ref('mig_base')}$",
                                    "prefix": "Mig : ",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  },
                                  {
                                    "key": "wlp_mod",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "${ref('wlp_base')}$",
                                    "prefix": "Wlp : ",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  }
                                ],
                                "flow": "horizontal",
                                "align": "center",
                                "type": "panel"
                              }
                            ],
                            "flow": "vertical",
                            "align": "center",
                            "type": "panel"
                          }
                        ],
                        "flow": "horizontal",
                        "align": "center",
                        "type": "panel"
                      },
                      {
                        "key": "status_imm_table",
                        "cssClass": "npc_tab_content ",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "",
                        "contents": [
                          [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "",
                                  "value": "<i class=\"fa-solid fa-syringe\"> Status Immunities</i>",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label"
                                },
                                {
                                  "key": "",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "contents": [
                                    {
                                      "key": "",
                                      "cssClass": "",
                                      "role": "0",
                                      "permission": "0",
                                      "tooltip": "Temporarily reduces your Dexterity die size by one.",
                                      "visibilityFormula": "",
                                      "label": null,
                                      "defaultValue": null,
                                      "size": "full-size",
                                      "icon": "",
                                      "value": "<i class=\"fa-solid fa-clock\"> Slow</i>",
                                      "prefix": "",
                                      "suffix": "",
                                      "rollMessage": "",
                                      "altRollMessage": "",
                                      "style": "label",
                                      "type": "label"
                                    },
                                    {
                                      "key": "slow_rst",
                                      "cssClass": "",
                                      "role": "0",
                                      "permission": "0",
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "label": "",
                                      "defaultValue": null,
                                      "size": "x-small",
                                      "type": "checkbox",
                                      "defaultChecked": false
                                    }
                                  ],
                                  "flow": "vertical",
                                  "align": "center",
                                  "type": "panel"
                                },
                                {
                                  "key": "",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "contents": [
                                    {
                                      "key": "",
                                      "cssClass": "",
                                      "role": "0",
                                      "permission": "0",
                                      "tooltip": "Temporarily reduces your Willpower die size by one.",
                                      "visibilityFormula": "",
                                      "label": null,
                                      "defaultValue": null,
                                      "size": "full-size",
                                      "icon": "",
                                      "value": "<i class=\"fa-solid fa-face-fearful\"> Shaken</i>",
                                      "prefix": "",
                                      "suffix": "",
                                      "rollMessage": "",
                                      "altRollMessage": "",
                                      "style": "label",
                                      "type": "label"
                                    },
                                    {
                                      "key": "shaken_rst",
                                      "cssClass": "",
                                      "role": "0",
                                      "permission": "0",
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "label": "",
                                      "defaultValue": null,
                                      "size": "x-small",
                                      "type": "checkbox",
                                      "defaultChecked": false
                                    }
                                  ],
                                  "flow": "vertical",
                                  "align": "center",
                                  "type": "panel"
                                },
                                {
                                  "key": "",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "contents": [
                                    {
                                      "key": "",
                                      "cssClass": "",
                                      "role": "0",
                                      "permission": "0",
                                      "tooltip": "Temporarily reduces your Insight die size by one.",
                                      "visibilityFormula": "",
                                      "label": null,
                                      "defaultValue": null,
                                      "size": "full-size",
                                      "icon": "",
                                      "value": "<i class=\"fa-solid fa-face-dizzy\"> Dazed</i>",
                                      "prefix": "",
                                      "suffix": "",
                                      "rollMessage": "",
                                      "altRollMessage": "",
                                      "style": "label",
                                      "type": "label"
                                    },
                                    {
                                      "key": "dazed_rst",
                                      "cssClass": "",
                                      "role": "0",
                                      "permission": "0",
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "label": "",
                                      "defaultValue": null,
                                      "size": "x-small",
                                      "type": "checkbox",
                                      "defaultChecked": false
                                    }
                                  ],
                                  "flow": "vertical",
                                  "align": "center",
                                  "type": "panel"
                                },
                                {
                                  "key": "",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "contents": [
                                    {
                                      "key": "",
                                      "cssClass": "",
                                      "role": "0",
                                      "permission": "0",
                                      "tooltip": "Temporarily reduces your Might die size by one.",
                                      "visibilityFormula": "",
                                      "label": null,
                                      "defaultValue": null,
                                      "size": "full-size",
                                      "icon": "",
                                      "value": "<i class=\"fa-solid fa-face-tired\"> Weak</i>",
                                      "prefix": "",
                                      "suffix": "",
                                      "rollMessage": "",
                                      "altRollMessage": "",
                                      "style": "label",
                                      "type": "label"
                                    },
                                    {
                                      "key": "weak_rst",
                                      "cssClass": "",
                                      "role": "0",
                                      "permission": "0",
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "label": "",
                                      "defaultValue": null,
                                      "size": "x-small",
                                      "type": "checkbox",
                                      "defaultChecked": false
                                    }
                                  ],
                                  "flow": "vertical",
                                  "align": "center",
                                  "type": "panel"
                                },
                                {
                                  "key": "",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "contents": [
                                    {
                                      "key": "",
                                      "cssClass": "",
                                      "role": "0",
                                      "permission": "0",
                                      "tooltip": "Temporarily reduces your Might and Willpower die sizes by one.",
                                      "visibilityFormula": "",
                                      "label": null,
                                      "defaultValue": null,
                                      "size": "full-size",
                                      "icon": "",
                                      "value": "<i class=\"fa-solid fa-flask-round-poison\"> Poisoned</i>",
                                      "prefix": "",
                                      "suffix": "",
                                      "rollMessage": "",
                                      "altRollMessage": "",
                                      "style": "label",
                                      "type": "label"
                                    },
                                    {
                                      "key": "poisoned_rst",
                                      "cssClass": "",
                                      "role": "0",
                                      "permission": "0",
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "label": "",
                                      "defaultValue": null,
                                      "size": "x-small",
                                      "type": "checkbox",
                                      "defaultChecked": false
                                    }
                                  ],
                                  "flow": "vertical",
                                  "align": "center",
                                  "type": "panel"
                                },
                                {
                                  "key": "",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "contents": [
                                    {
                                      "key": "",
                                      "cssClass": "",
                                      "role": "0",
                                      "permission": "0",
                                      "tooltip": "Temporarily reduces your Dexterity and Insight die sizes by one.",
                                      "visibilityFormula": "",
                                      "label": null,
                                      "defaultValue": null,
                                      "size": "full-size",
                                      "icon": "",
                                      "value": "<i class=\"fa-solid fa-face-angry\"> Enraged</i>",
                                      "prefix": "",
                                      "suffix": "",
                                      "rollMessage": "",
                                      "altRollMessage": "",
                                      "style": "label",
                                      "type": "label"
                                    },
                                    {
                                      "key": "enraged_rst",
                                      "cssClass": "",
                                      "role": "0",
                                      "permission": "0",
                                      "tooltip": "",
                                      "visibilityFormula": "",
                                      "label": "",
                                      "defaultValue": null,
                                      "size": "x-small",
                                      "type": "checkbox",
                                      "defaultChecked": false
                                    }
                                  ],
                                  "flow": "vertical",
                                  "align": "center",
                                  "type": "panel"
                                }
                              ],
                              "flow": "horizontal",
                              "align": "center",
                              "type": "panel"
                            }
                          ]
                        ],
                        "cols": "1",
                        "rows": "1",
                        "layout": "",
                        "type": "table"
                      },
                      {
                        "key": "",
                        "cssClass": "npc_tab_content ",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "",
                        "contents": [
                          [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "medium",
                              "icon": "",
                              "value": "<i class=\"fa-solid fa-star-of-david\"> Elemental Resistance</i>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "bold",
                              "type": "label"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": null,
                              "contents": [
                                {
                                  "key": "",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Physical",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "",
                                  "value": "<i class=\"fa-solid fa-sword\" style=\"color: ${equalText(string(ref('affinity_1')),'-') ? 'gray' : ''}$\"></i>",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "",
                                  "altRollMessage": "",
                                  "style": "bold",
                                  "type": "label"
                                },
                                {
                                  "key": "affinity_1",
                                  "cssClass": "alt_text_field_background",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "-",
                                  "size": "small",
                                  "options": [
                                    {
                                      "key": "-",
                                      "value": "-"
                                    },
                                    {
                                      "key": "VUL",
                                      "value": "VUL"
                                    },
                                    {
                                      "key": "RST",
                                      "value": "RST"
                                    },
                                    {
                                      "key": "IMM",
                                      "value": "IMM"
                                    },
                                    {
                                      "key": "ABS",
                                      "value": "ABS"
                                    },
                                    {
                                      "key": "RPL",
                                      "value": "RPL"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select"
                                }
                              ],
                              "flow": "vertical",
                              "align": "center",
                              "type": "panel"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": null,
                              "contents": [
                                {
                                  "key": "",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Air",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "",
                                  "value": "<i class=\"fa-solid fa-wind\" style=\"color: ${equalText(string(ref('affinity_2')),'-') ? 'gray' : ''}$\"></i>",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label"
                                },
                                {
                                  "key": "affinity_2",
                                  "cssClass": "alt_text_field_background",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "-",
                                  "size": "small",
                                  "options": [
                                    {
                                      "key": "-",
                                      "value": "-"
                                    },
                                    {
                                      "key": "VUL",
                                      "value": "VUL"
                                    },
                                    {
                                      "key": "RST",
                                      "value": "RST"
                                    },
                                    {
                                      "key": "IMM",
                                      "value": "IMM"
                                    },
                                    {
                                      "key": "ABS",
                                      "value": "ABS"
                                    },
                                    {
                                      "key": "RPL",
                                      "value": "RPL"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select"
                                }
                              ],
                              "flow": "vertical",
                              "align": "center",
                              "type": "panel"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": null,
                              "contents": [
                                {
                                  "key": "",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Bolt",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "",
                                  "value": "<i class=\"fa-solid fa-bolt\" style=\"color: ${equalText(string(ref('affinity_3')),'-') ? 'gray' : ''}$\"></i>",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label"
                                },
                                {
                                  "key": "affinity_3",
                                  "cssClass": "alt_text_field_background",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "-",
                                  "size": "small",
                                  "options": [
                                    {
                                      "key": "-",
                                      "value": "-"
                                    },
                                    {
                                      "key": "VUL",
                                      "value": "VUL"
                                    },
                                    {
                                      "key": "RST",
                                      "value": "RST"
                                    },
                                    {
                                      "key": "IMM",
                                      "value": "IMM"
                                    },
                                    {
                                      "key": "ABS",
                                      "value": "ABS"
                                    },
                                    {
                                      "key": "RPL",
                                      "value": "RPL"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select"
                                }
                              ],
                              "flow": "vertical",
                              "align": "center",
                              "type": "panel"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": null,
                              "contents": [
                                {
                                  "key": "",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Dark",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "",
                                  "value": "<i class=\"fa-solid fa-moon-stars\" style=\"color: ${equalText(string(ref('affinity_4')),'-') ? 'gray' : ''}$\"></i>",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label"
                                },
                                {
                                  "key": "affinity_4",
                                  "cssClass": "alt_text_field_background",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "-",
                                  "size": "small",
                                  "options": [
                                    {
                                      "key": "-",
                                      "value": "-"
                                    },
                                    {
                                      "key": "VUL",
                                      "value": "VUL"
                                    },
                                    {
                                      "key": "RST",
                                      "value": "RST"
                                    },
                                    {
                                      "key": "IMM",
                                      "value": "IMM"
                                    },
                                    {
                                      "key": "ABS",
                                      "value": "ABS"
                                    },
                                    {
                                      "key": "RPL",
                                      "value": "RPL"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select"
                                }
                              ],
                              "flow": "vertical",
                              "align": "center",
                              "type": "panel"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": null,
                              "contents": [
                                {
                                  "key": "",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Earth",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "",
                                  "value": "<i class=\"fa-solid fa-mountains\" style=\"color: ${equalText(string(ref('affinity_5')),'-') ? 'gray' : ''}$\"></i>",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label"
                                },
                                {
                                  "key": "affinity_5",
                                  "cssClass": "alt_text_field_background",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "-",
                                  "size": "small",
                                  "options": [
                                    {
                                      "key": "-",
                                      "value": "-"
                                    },
                                    {
                                      "key": "VUL",
                                      "value": "VUL"
                                    },
                                    {
                                      "key": "RST",
                                      "value": "RST"
                                    },
                                    {
                                      "key": "IMM",
                                      "value": "IMM"
                                    },
                                    {
                                      "key": "ABS",
                                      "value": "ABS"
                                    },
                                    {
                                      "key": "RPL",
                                      "value": "RPL"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select"
                                }
                              ],
                              "flow": "vertical",
                              "align": "center",
                              "type": "panel"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": null,
                              "contents": [
                                {
                                  "key": "",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Fire",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "",
                                  "value": "<i class=\"fa-solid fa-fire\" style=\"color: ${equalText(string(ref('affinity_6')),'-') ? 'gray' : ''}$\"></i>",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label"
                                },
                                {
                                  "key": "affinity_6",
                                  "cssClass": "alt_text_field_background",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "-",
                                  "size": "small",
                                  "options": [
                                    {
                                      "key": "-",
                                      "value": "-"
                                    },
                                    {
                                      "key": "VUL",
                                      "value": "VUL"
                                    },
                                    {
                                      "key": "RST",
                                      "value": "RST"
                                    },
                                    {
                                      "key": "IMM",
                                      "value": "IMM"
                                    },
                                    {
                                      "key": "ABS",
                                      "value": "ABS"
                                    },
                                    {
                                      "key": "RPL",
                                      "value": "RPL"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select"
                                }
                              ],
                              "flow": "vertical",
                              "align": "center",
                              "type": "panel"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": null,
                              "contents": [
                                {
                                  "key": "",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Ice",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "",
                                  "value": "<i class=\"fa-solid fa-snowflake\" style=\"color: ${equalText(string(ref('affinity_7')),'-') ? 'gray' : ''}$\"></i>",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label"
                                },
                                {
                                  "key": "affinity_7",
                                  "cssClass": "alt_text_field_background",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "-",
                                  "size": "small",
                                  "options": [
                                    {
                                      "key": "-",
                                      "value": "-"
                                    },
                                    {
                                      "key": "VUL",
                                      "value": "VUL"
                                    },
                                    {
                                      "key": "RST",
                                      "value": "RST"
                                    },
                                    {
                                      "key": "IMM",
                                      "value": "IMM"
                                    },
                                    {
                                      "key": "ABS",
                                      "value": "ABS"
                                    },
                                    {
                                      "key": "RPL",
                                      "value": "RPL"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select"
                                }
                              ],
                              "flow": "vertical",
                              "align": "center",
                              "type": "panel"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": null,
                              "contents": [
                                {
                                  "key": "",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Light",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "",
                                  "value": "<i class=\"fa-solid fa-sun\" style=\"color: ${equalText(string(ref('affinity_8')),'-') ? 'gray' : ''}$\"></i>",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label"
                                },
                                {
                                  "key": "affinity_8",
                                  "cssClass": "alt_text_field_background",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "-",
                                  "size": "small",
                                  "options": [
                                    {
                                      "key": "-",
                                      "value": "-"
                                    },
                                    {
                                      "key": "VUL",
                                      "value": "VUL"
                                    },
                                    {
                                      "key": "RST",
                                      "value": "RST"
                                    },
                                    {
                                      "key": "IMM",
                                      "value": "IMM"
                                    },
                                    {
                                      "key": "ABS",
                                      "value": "ABS"
                                    },
                                    {
                                      "key": "RPL",
                                      "value": "RPL"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select"
                                }
                              ],
                              "flow": "vertical",
                              "align": "center",
                              "type": "panel"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": null,
                              "contents": [
                                {
                                  "key": "",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Poison",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "",
                                  "value": "<i class=\"fa-solid fa-skull-crossbones\" style=\"color: ${equalText(string(ref('affinity_9')),'-') ? 'gray' : ''}$\"></i>",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label"
                                },
                                {
                                  "key": "affinity_9",
                                  "cssClass": "alt_text_field_background",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "-",
                                  "size": "small",
                                  "options": [
                                    {
                                      "key": "-",
                                      "value": "-"
                                    },
                                    {
                                      "key": "VUL",
                                      "value": "VUL"
                                    },
                                    {
                                      "key": "RST",
                                      "value": "RST"
                                    },
                                    {
                                      "key": "IMM",
                                      "value": "IMM"
                                    },
                                    {
                                      "key": "ABS",
                                      "value": "ABS"
                                    },
                                    {
                                      "key": "RPL",
                                      "value": "RPL"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select"
                                }
                              ],
                              "flow": "vertical",
                              "align": "center",
                              "type": "panel"
                            }
                          ]
                        ],
                        "cols": "10",
                        "rows": "1",
                        "layout": "",
                        "type": "table"
                      },
                      {
                        "key": "",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "",
                        "contents": [
                          {
                            "key": "",
                            "cssClass": "",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "contents": [
                              {
                                "key": "",
                                "cssClass": "npc-font-color",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "Modifiers from buffs/debuffs are displayed here.",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "",
                                "value": "<i class=\"fa-solid fa-heart\"> HP Mod</i>",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label"
                              },
                              {
                                "key": "mod_hp",
                                "cssClass": "npc-font-color npc-label-styling",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "Modifiers from buffs/debuffs are displayed here.",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "small",
                                "icon": "",
                                "value": "0",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label"
                              }
                            ],
                            "flow": "vertical",
                            "align": "center",
                            "type": "panel"
                          },
                          {
                            "key": "",
                            "cssClass": "",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "contents": [
                              {
                                "key": "",
                                "cssClass": "npc-font-color",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "Modifiers from buffs/debuffs are displayed here.",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "",
                                "value": "<i class=\"fa-solid fa-sparkles\"> MP Mod</i>",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label"
                              },
                              {
                                "key": "mod_mp",
                                "cssClass": "npc-font-color npc-label-styling ",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "Modifiers from buffs/debuffs are displayed here.",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "small",
                                "icon": "",
                                "value": "0",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label"
                              }
                            ],
                            "flow": "vertical",
                            "align": "center",
                            "type": "panel"
                          },
                          {
                            "key": "",
                            "cssClass": "",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "contents": [
                              {
                                "key": "",
                                "cssClass": "npc-font-color",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "Modifiers from buffs/debuffs are displayed here.",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "",
                                "value": "<i class=\"fa-solid fa-shield-quartered\"> Def Mod</i>",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label"
                              },
                              {
                                "key": "mod_def",
                                "cssClass": "npc-font-color npc-label-styling ",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "Modifiers from buffs/debuffs are displayed here.",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "small",
                                "icon": "",
                                "value": "0",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label"
                              }
                            ],
                            "flow": "vertical",
                            "align": "center",
                            "type": "panel"
                          },
                          {
                            "key": "",
                            "cssClass": "",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "contents": [
                              {
                                "key": "",
                                "cssClass": "npc-font-color",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "Modifiers from buffs/debuffs are displayed here.",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "",
                                "value": "<i class=\"fa-solid fa-shield-plus\"> MDef Mod</i>",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label"
                              },
                              {
                                "key": "mod_mdef",
                                "cssClass": "npc-font-color npc-label-styling ",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "Modifiers from buffs/debuffs are displayed here.",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "small",
                                "icon": "",
                                "value": "0",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label"
                              }
                            ],
                            "flow": "vertical",
                            "align": "center",
                            "type": "panel"
                          },
                          {
                            "key": "",
                            "cssClass": "",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "contents": [
                              {
                                "key": "",
                                "cssClass": "npc-font-color",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "Modifiers from buffs/debuffs are displayed here.",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "",
                                "value": "<i class=\"fa-solid fa-crosshairs\"> Acc Mod</i>",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label"
                              },
                              {
                                "key": "mod_acc",
                                "cssClass": "npc-font-color npc-label-styling ",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "Modifiers from buffs/debuffs are displayed here.",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "small",
                                "icon": "",
                                "value": "0",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label"
                              }
                            ],
                            "flow": "vertical",
                            "align": "center",
                            "type": "panel"
                          },
                          {
                            "key": "",
                            "cssClass": "",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "contents": [
                              {
                                "key": "",
                                "cssClass": "npc-font-color",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "Modifiers from buffs/debuffs are displayed here.",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "",
                                "value": "<i class=\"fa-solid fa-wand-sparkles\"> M.Check Mod</i>",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label"
                              },
                              {
                                "key": "mod_mcheck",
                                "cssClass": "npc-font-color npc-label-styling ",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "Modifiers from buffs/debuffs are displayed here.",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "small",
                                "icon": "",
                                "value": "0",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label"
                              }
                            ],
                            "flow": "vertical",
                            "align": "center",
                            "type": "panel"
                          }
                        ],
                        "flow": "horizontal",
                        "align": "center",
                        "type": "panel"
                      }
                    ],
                    "name": "Stats",
                    "type": "tab"
                  },
                  {
                    "key": "combat",
                    "cssClass": null,
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": null,
                    "contents": [
                      {
                        "key": "",
                        "cssClass": "npc_alt_background_combat",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "",
                        "contents": [
                          {
                            "key": "",
                            "cssClass": "npc-font-color",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "label": null,
                            "defaultValue": null,
                            "size": "medium",
                            "icon": "",
                            "value": "<i class=\"fa-solid fa-hand-holding-magic\">  Features</i>",
                            "prefix": "",
                            "suffix": "",
                            "rollMessage": "",
                            "altRollMessage": "",
                            "style": "bold",
                            "type": "label"
                          },
                          {
                            "key": "",
                            "cssClass": "section-border-light ",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "contents": [
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "",
                                    "cssClass": "npc-font-color",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "<i class=\"fa-solid fa-swords\"> Equipments?</i>",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  },
                                  {
                                    "key": "isEquipments",
                                    "cssClass": "font-color",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": "",
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "type": "checkbox",
                                    "defaultChecked": true
                                  }
                                ],
                                "flow": "vertical",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "",
                                    "cssClass": "npc-font-color",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "<i class=\"fa-solid fa-claw-marks\"> Basic Attacks?</i>",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  },
                                  {
                                    "key": "isBasicAttacks",
                                    "cssClass": "font-color",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": "",
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "type": "checkbox",
                                    "defaultChecked": true
                                  }
                                ],
                                "flow": "vertical",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "",
                                    "cssClass": "npc-font-color",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "<i class=\"fa-solid fa-star-of-david\"> Spells?</i>",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  },
                                  {
                                    "key": "isSpells",
                                    "cssClass": "font-color",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": "",
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "type": "checkbox",
                                    "defaultChecked": true
                                  }
                                ],
                                "flow": "vertical",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "",
                                    "cssClass": "npc-font-color",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "<i class=\"fa-solid fa-paw-claws\"> Other Actions?</i>",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  },
                                  {
                                    "key": "isOtherActions",
                                    "cssClass": "font-color",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": "",
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "type": "checkbox",
                                    "defaultChecked": true
                                  }
                                ],
                                "flow": "vertical",
                                "align": "center",
                                "type": "panel"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "",
                                    "cssClass": "npc-font-color",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "<i class=\"fa-solid fa-scroll\"> Special Rules?</i>",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label"
                                  },
                                  {
                                    "key": "isSpecialRules",
                                    "cssClass": "font-color",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": "",
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "type": "checkbox",
                                    "defaultChecked": true
                                  }
                                ],
                                "flow": "vertical",
                                "align": "center",
                                "type": "panel"
                              }
                            ],
                            "flow": "horizontal",
                            "align": "center",
                            "type": "panel"
                          }
                        ],
                        "flow": "horizontal",
                        "align": "center",
                        "type": "panel"
                      },
                      {
                        "key": "equipments",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "isEquipments==true",
                        "contents": [
                          {
                            "key": "",
                            "cssClass": "npc-font-color",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "label": null,
                            "defaultValue": null,
                            "size": "full-size",
                            "icon": "",
                            "value": "<i class=\"fa-solid fa-swords\"> Weapons</i>",
                            "prefix": "",
                            "suffix": "",
                            "rollMessage": "",
                            "altRollMessage": "",
                            "style": "bold",
                            "type": "label"
                          },
                          {
                            "key": "equip_table",
                            "cssClass": "npc_alt_background",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "rowLayout": [
                              {
                                "key": "is_equipped",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": null,
                                "size": "x-small",
                                "type": "checkbox",
                                "defaultChecked": false,
                                "align": "center",
                                "colName": "Equipped?"
                              },
                              {
                                "key": "icon",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "x-small",
                                "icon": "",
                                "value": "<i class=\"fa-solid ${equalText(string(sameRow('main_attrib_1')),'SHI') ? 'fa-shield': sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\"></i>",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label",
                                "align": "center",
                                "colName": "Icon"
                              },
                              {
                                "key": "main_hand",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "",
                                "size": "medium",
                                "charList": "",
                                "maxLength": "",
                                "type": "textField",
                                "align": "center",
                                "colName": "Name"
                              },
                              {
                                "key": "is_ranged",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": null,
                                "size": "x-small",
                                "type": "checkbox",
                                "defaultChecked": false,
                                "align": "left",
                                "colName": "Ranged?"
                              },
                              {
                                "key": "main_attrib_1",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "DEX",
                                "size": "m-small",
                                "options": [
                                  {
                                    "key": "DEX",
                                    "value": "Dex"
                                  },
                                  {
                                    "key": "INS",
                                    "value": "Insight"
                                  },
                                  {
                                    "key": "WLP",
                                    "value": "Willpower"
                                  },
                                  {
                                    "key": "MIG",
                                    "value": "Might"
                                  },
                                  {
                                    "key": "SHI",
                                    "value": "Shield"
                                  }
                                ],
                                "tableKey": null,
                                "tableKeyColumn": null,
                                "tableLabelColumn": null,
                                "formulaKeyOptions": null,
                                "formulaLabelOptions": null,
                                "type": "select",
                                "align": "center",
                                "colName": "First Attribute"
                              },
                              {
                                "key": "main_attrib_2",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "MIG",
                                "size": "m-small",
                                "options": [
                                  {
                                    "key": "DEX",
                                    "value": "Dex"
                                  },
                                  {
                                    "key": "INS",
                                    "value": "Insight"
                                  },
                                  {
                                    "key": "WLP",
                                    "value": "Willpower"
                                  },
                                  {
                                    "key": "MIG",
                                    "value": "Might"
                                  },
                                  {
                                    "key": "SHI",
                                    "value": "-"
                                  }
                                ],
                                "tableKey": null,
                                "tableKeyColumn": null,
                                "tableLabelColumn": null,
                                "formulaKeyOptions": null,
                                "formulaLabelOptions": null,
                                "type": "select",
                                "align": "center",
                                "colName": "Second Attribute"
                              },
                              {
                                "key": "weapon1_mod",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "0",
                                "size": "small",
                                "allowDecimal": false,
                                "minVal": "0",
                                "maxVal": "",
                                "allowRelative": true,
                                "showControls": true,
                                "controlsStyle": "hover",
                                "type": "numberField",
                                "align": "center",
                                "colName": "Accuracy"
                              },
                              {
                                "key": "weapon1_damage",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "0",
                                "size": "small",
                                "allowDecimal": false,
                                "minVal": "0",
                                "maxVal": "",
                                "allowRelative": true,
                                "showControls": true,
                                "controlsStyle": "hover",
                                "type": "numberField",
                                "align": "center",
                                "colName": "HR +"
                              },
                              {
                                "key": "custom_weapon_def",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "0",
                                "size": "small",
                                "allowDecimal": false,
                                "minVal": "0",
                                "maxVal": "",
                                "allowRelative": true,
                                "showControls": true,
                                "controlsStyle": "hover",
                                "type": "numberField",
                                "align": "center",
                                "colName": "Bonus def"
                              },
                              {
                                "key": "custom_weapon_mdef",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "0",
                                "size": "small",
                                "allowDecimal": false,
                                "minVal": "0",
                                "maxVal": "",
                                "allowRelative": true,
                                "showControls": true,
                                "controlsStyle": "hover",
                                "type": "numberField",
                                "align": "center",
                                "colName": "Bonus Mdef"
                              },
                              {
                                "key": "weapon1_damagetype",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "PHY",
                                "size": "full-size",
                                "options": [
                                  {
                                    "key": "PHY",
                                    "value": "Physical"
                                  },
                                  {
                                    "key": "FIR",
                                    "value": "Fire"
                                  },
                                  {
                                    "key": "ICE",
                                    "value": "Ice"
                                  },
                                  {
                                    "key": "Air",
                                    "value": "Air"
                                  },
                                  {
                                    "key": "EAR",
                                    "value": "Earth"
                                  },
                                  {
                                    "key": "BOL",
                                    "value": "Bolt"
                                  },
                                  {
                                    "key": "LIG",
                                    "value": "Light"
                                  },
                                  {
                                    "key": "DAR",
                                    "value": "Dark"
                                  },
                                  {
                                    "key": "POI",
                                    "value": "Poison"
                                  },
                                  {
                                    "key": "ALM",
                                    "value": "Untyped"
                                  },
                                  {
                                    "key": "NA",
                                    "value": "-"
                                  }
                                ],
                                "tableKey": null,
                                "tableKeyColumn": null,
                                "tableLabelColumn": null,
                                "formulaKeyOptions": null,
                                "formulaLabelOptions": null,
                                "type": "select",
                                "align": "center",
                                "colName": "Type"
                              },
                              {
                                "key": "main_details",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "<h2>Description</h2>\n<p>&nbsp;</p>\n<p>Enter description here.</p>\n<p>&nbsp;</p>\n<h2>Customizations</h2>\n<p>&nbsp;</p>\n<table style=\"width: 98.6577%; height: 68px;\" border=\"1\"><colgroup><col style=\"width: 41.9969%;\"><col style=\"width: 58.0031%;\"></colgroup>\n<tbody>\n<tr style=\"height: 17px;\">\n<td style=\"height: 17px;\"><strong>Customizations</strong></td>\n<td style=\"height: 17px;\"><strong>Descriptions</strong></td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"height: 17px;\">&nbsp;</td>\n<td style=\"height: 17px;\">&nbsp;</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"height: 17px;\">&nbsp;</td>\n<td style=\"height: 17px;\">&nbsp;</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"height: 17px;\">&nbsp;</td>\n<td style=\"height: 17px;\">&nbsp;</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>\n<h2>Quality</h2>\n<p>&nbsp;</p>\n<table style=\"width: 100%;\" border=\"1\"><colgroup><col style=\"width: 29.5189%;\"><col style=\"width: 70.4811%;\"></colgroup>\n<tbody>\n<tr>\n<td><strong>Quality</strong></td>\n<td><strong>Description</strong></td>\n</tr>\n<tr>\n<td>&nbsp;</td>\n<td>&nbsp;</td>\n</tr>\n</tbody>\n</table>",
                                "size": null,
                                "style": "icon",
                                "type": "textArea",
                                "align": "left",
                                "colName": ""
                              },
                              {
                                "key": "roll",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "dice",
                                "value": "",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "${#word:=sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\n\n\n<h2>Attacks with <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('main_hand'))}$! </h2>\n\n<p>\n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'INS') == true and isZero(dice1) == true ? ref('ins_current') : dice1}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'MIG') == true and isZero(dice1) == true ? ref('mig_current') : dice1}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'WLP') == true and isZero(dice1) == true ? ref('wlp_current') : dice1}$ \n\n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'INS') == true and isZero(dice2) == true ? ref('ins_current') : dice2}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'MIG') == true and isZero(dice2) == true ? ref('mig_current') : dice2}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'WLP') == true and isZero(dice2) == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('main_attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p>\n<p><b>${!string(sameRow('main_attrib_2'))}$ </b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Attack Roll: ${D1+D2+sameRow('weapon1_mod')+ref('mod_acc')}$ HR: ${HR}$ + ${sameRow('weapon1_damage')}$ </strong></p> \n\n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'background-color:rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'background-color:rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'background-color:rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'background-color:rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'background-color:rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'background-color:rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'background-color:rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'background-color:rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'background-color:rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'; background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n<div style=\"text-align: center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align: center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n    <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('weapon1_damage'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
                                "altRollMessage": "${#word:=sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\n\n<h2>Attacks with <i class=\"fa-solid ${!string(word)}$\"></i> ${!string(sameRow('main_hand'))}$  using two-weapon fighting!&nbsp;</h2>\n\n<p>\n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'INS') == true and isZero(dice1) == true ? ref('ins_current') : dice1}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'MIG') == true and isZero(dice1) == true ? ref('mig_current') : dice1}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'WLP') == true and isZero(dice1) == true ? ref('wlp_current') : dice1}$ \n\n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'INS') == true and isZero(dice2) == true ? ref('ins_current') : dice2}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'MIG') == true and isZero(dice2) == true ? ref('mig_current') : dice2}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'WLP') == true and isZero(dice2) == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('main_attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$ </p> <p><b>${!string(sameRow('main_attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n\n<h4>\n<p><strong>Attack Roll: ${D1+D2+sameRow('weapon1_mod')+ref('mod_acc')}$ HR: 0 + ${sameRow('weapon1_damage')}$ </strong></p> \n<strong>\n\n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'background-color:rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'background-color:rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'background-color:rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'background-color:rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'background-color:rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'background-color:rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'background-color:rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'background-color:rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'background-color:rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n\n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(sameRow('weapon1_damage'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n\n</table>",
                                "style": "label",
                                "type": "label",
                                "align": "left",
                                "colName": ""
                              }
                            ],
                            "head": true,
                            "deleteWarning": true,
                            "predefinedLines": [],
                            "canPlayerAdd": true,
                            "type": "dynamicTable"
                          },
                          {
                            "key": "",
                            "cssClass": "",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "contents": [
                              {
                                "key": "",
                                "cssClass": "npc-font-color",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "",
                                "value": "<i class=\"fa-solid fa-helmet-battle\"> Armors</i>",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "bold",
                                "type": "label"
                              },
                              {
                                "key": "armor_container",
                                "cssClass": "npc_alt_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "rowLayout": [
                                  {
                                    "key": "eq_lbl",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "${item.is_equipped ? 'Yes':'No'}$",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label",
                                    "align": "center",
                                    "colName": "Equipped?"
                                  },
                                  {
                                    "key": "def_lbl",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "${item.armor_mod}$",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label",
                                    "align": "center",
                                    "colName": "Def"
                                  },
                                  {
                                    "key": "mdef_lbl",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "${item.magic_defense_mod}$",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label",
                                    "align": "center",
                                    "colName": "Mdef"
                                  },
                                  {
                                    "key": "hp_lbl",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "${item.bonus_hp}$",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label",
                                    "align": "center",
                                    "colName": "Bonus HP"
                                  },
                                  {
                                    "key": "mp_lbl",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "${item.bonus_mp}$",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label",
                                    "align": "center",
                                    "colName": "Bonus MP"
                                  },
                                  {
                                    "key": "ip_lbl",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "${item.bonus_ip}$",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "label",
                                    "type": "label",
                                    "align": "center",
                                    "colName": "Bonus IP"
                                  },
                                  {
                                    "key": "init_lbl",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "${item.initiative_bonus}$",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "bold",
                                    "type": "label",
                                    "align": "center",
                                    "colName": "Initiative"
                                  }
                                ],
                                "head": false,
                                "deleteWarning": true,
                                "title": "",
                                "hideEmpty": true,
                                "headDisplay": true,
                                "showDelete": true,
                                "statusIcon": false,
                                "nameAlign": "left",
                                "nameLabel": "Name",
                                "templateFilter": [
                                  "cp0B290qrMBSDEQa"
                                ],
                                "itemFilter": [],
                                "type": "itemContainer"
                              },
                              {
                                "key": "",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "contents": [
                                  {
                                    "key": "",
                                    "cssClass": "npc-font-color",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": null,
                                    "defaultValue": null,
                                    "size": "full-size",
                                    "icon": "",
                                    "value": "Wearing martial armor?",
                                    "prefix": "",
                                    "suffix": "",
                                    "rollMessage": "",
                                    "altRollMessage": "",
                                    "style": "bold",
                                    "type": "label"
                                  },
                                  {
                                    "key": "is_martialarmor",
                                    "cssClass": "",
                                    "role": "0",
                                    "permission": "0",
                                    "tooltip": "",
                                    "visibilityFormula": "",
                                    "label": "",
                                    "defaultValue": null,
                                    "size": "x-small",
                                    "type": "checkbox",
                                    "defaultChecked": false
                                  }
                                ],
                                "flow": "horizontal",
                                "align": "right",
                                "type": "panel"
                              }
                            ],
                            "flow": "vertical",
                            "align": "center",
                            "type": "panel"
                          }
                        ],
                        "flow": "vertical",
                        "align": "center",
                        "type": "panel"
                      },
                      {
                        "key": "basic_attacks",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "isBasicAttacks ==true",
                        "contents": [
                          {
                            "key": "",
                            "cssClass": "npc-font-color",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "label": null,
                            "defaultValue": null,
                            "size": "full-size",
                            "icon": "",
                            "value": "<i class=\"fa-solid fa-claw-marks\"> Basic Attacks</i>",
                            "prefix": "",
                            "suffix": "",
                            "rollMessage": "",
                            "altRollMessage": "",
                            "style": "label",
                            "type": "label"
                          },
                          {
                            "key": "basic_attack",
                            "cssClass": "npc_alt_background",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "rowLayout": [
                              {
                                "key": "icon",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "Use (M) or (R) in the name of the attack to change this.",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "",
                                "value": "<i class=\"fa-solid ${sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\"></i>",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label",
                                "align": "left",
                                "colName": ""
                              },
                              {
                                "key": "basic_name",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "",
                                "size": "medium",
                                "charList": "",
                                "maxLength": "",
                                "type": "textField",
                                "align": "left",
                                "colName": "Basic attacks"
                              },
                              {
                                "key": "is_ranged",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": null,
                                "size": "full-size",
                                "type": "checkbox",
                                "defaultChecked": false,
                                "align": "left",
                                "colName": "Ranged?"
                              },
                              {
                                "key": "attrib_1",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "DEX",
                                "size": "small",
                                "options": [
                                  {
                                    "key": "DEX",
                                    "value": "DEX"
                                  },
                                  {
                                    "key": "INS",
                                    "value": "INS"
                                  },
                                  {
                                    "key": "MIG",
                                    "value": "MIG"
                                  },
                                  {
                                    "key": "WLP",
                                    "value": "WLP"
                                  },
                                  {
                                    "key": "NO",
                                    "value": "-"
                                  }
                                ],
                                "tableKey": null,
                                "tableKeyColumn": null,
                                "tableLabelColumn": null,
                                "formulaKeyOptions": null,
                                "formulaLabelOptions": null,
                                "type": "select",
                                "align": "center",
                                "colName": "Attr. 1"
                              },
                              {
                                "key": "attrib_2",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "DEX",
                                "size": "small",
                                "options": [
                                  {
                                    "key": "DEX",
                                    "value": "DEX"
                                  },
                                  {
                                    "key": "INS",
                                    "value": "INS"
                                  },
                                  {
                                    "key": "MIG",
                                    "value": "MIG"
                                  },
                                  {
                                    "key": "WLP",
                                    "value": "WLP"
                                  },
                                  {
                                    "key": "-",
                                    "value": "-"
                                  }
                                ],
                                "tableKey": null,
                                "tableKeyColumn": null,
                                "tableLabelColumn": null,
                                "formulaKeyOptions": null,
                                "formulaLabelOptions": null,
                                "type": "select",
                                "align": "center",
                                "colName": "Attr. 2"
                              },
                              {
                                "key": "check_bonus",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "0",
                                "size": "small",
                                "allowDecimal": false,
                                "minVal": "",
                                "maxVal": "",
                                "allowRelative": false,
                                "showControls": false,
                                "controlsStyle": "hover",
                                "type": "numberField",
                                "align": "center",
                                "colName": "Acc."
                              },
                              {
                                "key": "dmg_bonus",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "0",
                                "size": "small",
                                "allowDecimal": false,
                                "minVal": "0",
                                "maxVal": "",
                                "allowRelative": false,
                                "showControls": false,
                                "controlsStyle": "hover",
                                "type": "numberField",
                                "align": "center",
                                "colName": "HR+"
                              },
                              {
                                "key": "type",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "PHY",
                                "size": "m-small",
                                "options": [
                                  {
                                    "key": "PHY",
                                    "value": "Physical"
                                  },
                                  {
                                    "key": "AIR",
                                    "value": "Air"
                                  },
                                  {
                                    "key": "BOL",
                                    "value": "Bolt"
                                  },
                                  {
                                    "key": "DAR",
                                    "value": "Dark"
                                  },
                                  {
                                    "key": "EAR",
                                    "value": "Earth"
                                  },
                                  {
                                    "key": "FIR",
                                    "value": "Fire"
                                  },
                                  {
                                    "key": "ICE",
                                    "value": "Ice"
                                  },
                                  {
                                    "key": "LIG",
                                    "value": "Light"
                                  },
                                  {
                                    "key": "POI",
                                    "value": "Poison"
                                  },
                                  {
                                    "key": "ALM",
                                    "value": "Untyped"
                                  }
                                ],
                                "tableKey": null,
                                "tableKeyColumn": null,
                                "tableLabelColumn": null,
                                "formulaKeyOptions": null,
                                "formulaLabelOptions": null,
                                "type": "select",
                                "align": "center",
                                "colName": "Type"
                              },
                              {
                                "key": "detail",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "",
                                "size": null,
                                "style": "dialog",
                                "type": "textArea",
                                "align": "left",
                                "colName": "Details"
                              },
                              {
                                "key": "roll",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "dice",
                                "value": "",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "${#word:=sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\n\n\n<h2>Attacks  with <i class=\"fa-solid ${!string(word)}$\"> </i> ${!sameRow('basic_name')}$!</h2>\n\n<table class=\"npc_chat_card\">\n  <tr>\n    <td class=\"chat-padding\">\n         ${!sameRow('detail','')}$\n    </td>\n  </tr>\n</table>\n\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_acc')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'background-color:rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'background-color:rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'background-color:rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'background-color:rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'background-color:rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'background-color:rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'background-color:rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'background-color:rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'background-color:rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
                                "altRollMessage": "${#word:=sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\n\n\n<h2>Attacks with <i class=\"fa-solid ${!string(word)}$\"> </i> ${!sameRow('basic_name')}$!</h2>\n\n<table class=\"npc_chat_card\">\n  <tr>\n    <td class=\"chat-padding\">\n         ${!sameRow('detail','')}$\n    </td>\n  </tr>\n</table>\n\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n\n<p><strong>Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_acc')}$ HR: 0 + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'background-color:rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'background-color:rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'background-color:rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'background-color:rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'background-color:rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'background-color:rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'background-color:rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'background-color:rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'background-color:rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
                                "style": "label",
                                "type": "label",
                                "align": "left",
                                "colName": ""
                              }
                            ],
                            "head": true,
                            "deleteWarning": true,
                            "predefinedLines": [],
                            "canPlayerAdd": true,
                            "type": "dynamicTable"
                          }
                        ],
                        "flow": "vertical",
                        "align": "center",
                        "type": "panel"
                      },
                      {
                        "key": "spells",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "isSpells==true",
                        "contents": [
                          {
                            "key": "",
                            "cssClass": "npc-font-color",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "label": null,
                            "defaultValue": null,
                            "size": "full-size",
                            "icon": "",
                            "value": "<i class=\"fa-solid fa-star-of-david\"> Offensive Spells</i>",
                            "prefix": "",
                            "suffix": "",
                            "rollMessage": "",
                            "altRollMessage": "",
                            "style": "label",
                            "type": "label"
                          },
                          {
                            "key": "spell_list",
                            "cssClass": "npc_alt_background",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "rowLayout": [
                              {
                                "key": "icon",
                                "cssClass": null,
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": null,
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "",
                                "value": "<i class=\"fa-solid fa-star\"></i>",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label",
                                "align": "left",
                                "colName": ""
                              },
                              {
                                "key": "spell_name",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "",
                                "size": "medium",
                                "charList": "",
                                "maxLength": "",
                                "type": "textField",
                                "align": "left",
                                "colName": "Spells"
                              },
                              {
                                "key": "attrib_1",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "DEX",
                                "size": "small",
                                "options": [
                                  {
                                    "key": "DEX",
                                    "value": "Dex"
                                  },
                                  {
                                    "key": "INS",
                                    "value": "Ins"
                                  },
                                  {
                                    "key": "MIG",
                                    "value": "Mig"
                                  },
                                  {
                                    "key": "WLP",
                                    "value": "Wlp"
                                  },
                                  {
                                    "key": "NA",
                                    "value": "-"
                                  }
                                ],
                                "tableKey": null,
                                "tableKeyColumn": null,
                                "tableLabelColumn": null,
                                "formulaKeyOptions": null,
                                "formulaLabelOptions": null,
                                "type": "select",
                                "align": "center",
                                "colName": "Attr. 1"
                              },
                              {
                                "key": "attrib_2",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "DEX",
                                "size": "small",
                                "options": [
                                  {
                                    "key": "DEX",
                                    "value": "Dex"
                                  },
                                  {
                                    "key": "INS",
                                    "value": "Ins"
                                  },
                                  {
                                    "key": "MIG",
                                    "value": "Mig"
                                  },
                                  {
                                    "key": "WLP",
                                    "value": "Wlp"
                                  },
                                  {
                                    "key": "NA",
                                    "value": "-"
                                  }
                                ],
                                "tableKey": null,
                                "tableKeyColumn": null,
                                "tableLabelColumn": null,
                                "formulaKeyOptions": null,
                                "formulaLabelOptions": null,
                                "type": "select",
                                "align": "center",
                                "colName": "Attr. 2"
                              },
                              {
                                "key": "check_bonus",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "0",
                                "size": "small",
                                "allowDecimal": false,
                                "minVal": "",
                                "maxVal": "",
                                "allowRelative": false,
                                "showControls": false,
                                "controlsStyle": "hover",
                                "type": "numberField",
                                "align": "center",
                                "colName": "M.Check"
                              },
                              {
                                "key": "dmg_bonus",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "0",
                                "size": "small",
                                "allowDecimal": false,
                                "minVal": "",
                                "maxVal": "",
                                "allowRelative": false,
                                "showControls": false,
                                "controlsStyle": "hover",
                                "type": "numberField",
                                "align": "center",
                                "colName": "HR +"
                              },
                              {
                                "key": "type",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "NA",
                                "size": "m-small",
                                "options": [
                                  {
                                    "key": "PHY",
                                    "value": "Physical"
                                  },
                                  {
                                    "key": "AIR",
                                    "value": "Air"
                                  },
                                  {
                                    "key": "BOL",
                                    "value": "Bolt"
                                  },
                                  {
                                    "key": "DAR",
                                    "value": "Dark"
                                  },
                                  {
                                    "key": "EAR",
                                    "value": "Earth"
                                  },
                                  {
                                    "key": "FIR",
                                    "value": "Fire"
                                  },
                                  {
                                    "key": "ICE",
                                    "value": "Ice"
                                  },
                                  {
                                    "key": "LIG",
                                    "value": "Light"
                                  },
                                  {
                                    "key": "POI",
                                    "value": "Poison"
                                  },
                                  {
                                    "key": "ALM",
                                    "value": "Untyped"
                                  },
                                  {
                                    "key": "NA",
                                    "value": "-"
                                  }
                                ],
                                "tableKey": null,
                                "tableKeyColumn": null,
                                "tableLabelColumn": null,
                                "formulaKeyOptions": null,
                                "formulaLabelOptions": null,
                                "type": "select",
                                "align": "center",
                                "colName": "Type"
                              },
                              {
                                "key": "details",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "<table style=\"width: 100%; height: 51px;\" border=\"1\"><colgroup><col style=\"width: 18.5915%;\"><col style=\"width: 81.4085%;\"></colgroup>\n<tbody>\n<tr style=\"height: 17px;\">\n<td style=\"height: 17px;\"><strong>Target</strong></td>\n<td style=\"height: 17px;\">&nbsp;One creature/Up to 3 creatures/One equipped weapons/Self/Special</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"height: 17px;\"><strong>Cost</strong></td>\n<td style=\"height: 17px;\">&nbsp;MP</td>\n</tr>\n<tr>\n<td><strong>Duration</strong></td>\n<td>&nbsp;Instantaneous/Scene</td>\n</tr>\n</tbody>\n</table>\n<table border=\"1\"><colgroup><col></colgroup>\n<tbody>\n<tr>\n<td>Spell description here</td>\n</tr>\n</tbody>\n</table>",
                                "size": null,
                                "style": "dialog",
                                "type": "textArea",
                                "align": "left",
                                "colName": "Details"
                              },
                              {
                                "key": "roll",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "dice",
                                "value": "",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "${#word:='fa-star-of-david'}$\n\n\n<h2>Casts <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('spell_name'))}$! </h2>\n\n\n<div class=\"npc_chat_card\">\n${!string(sameRow('details'))}$\n</div>\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Spell Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_mcheck')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'; background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n    <tr style=\"background-color:${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
                                "altRollMessage": "${#word:='fa-star-of-david'}$\n\n<div style=\"display: none;\">\n  %{game.tables.getName(\"Nic and co. (AoE)\").resetResults()}% \n</div>\n\n<h2>Casts <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('spell_name'))}$!</h2>\n\n<div class=\"npc_chat_card\">\n${!string(sameRow('details'))}$\n</div>\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Spell Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_mcheck')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"background-color:${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
                                "style": "label",
                                "type": "label",
                                "align": "left",
                                "colName": ""
                              }
                            ],
                            "head": true,
                            "deleteWarning": true,
                            "predefinedLines": [],
                            "canPlayerAdd": true,
                            "type": "dynamicTable"
                          }
                        ],
                        "flow": "vertical",
                        "align": "center",
                        "type": "panel"
                      },
                      {
                        "key": "other_actions",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "isOtherActions==true",
                        "contents": [
                          {
                            "key": "",
                            "cssClass": "npc-font-color",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "label": null,
                            "defaultValue": null,
                            "size": "full-size",
                            "icon": "",
                            "value": "<i class=\"fa-solid fa-paw-claws\"> Other Actions</i>",
                            "prefix": "",
                            "suffix": "",
                            "rollMessage": "",
                            "altRollMessage": "",
                            "style": "label",
                            "type": "label"
                          },
                          {
                            "key": "other_act_table",
                            "cssClass": "npc_alt_background",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "rowLayout": [
                              {
                                "key": "icon",
                                "cssClass": null,
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": null,
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "fa-solid fa-gear",
                                "value": "",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label",
                                "align": "left",
                                "colName": ""
                              },
                              {
                                "key": "other_name",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "",
                                "size": "medium",
                                "charList": "",
                                "maxLength": "",
                                "type": "textField",
                                "align": "left",
                                "colName": "Other Actions"
                              },
                              {
                                "key": "details",
                                "cssClass": null,
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": null,
                                "label": "",
                                "defaultValue": "",
                                "size": null,
                                "style": "dialog",
                                "type": "textArea",
                                "align": "left",
                                "colName": ""
                              },
                              {
                                "key": "roll",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "dice",
                                "value": "",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "<h2>Uses <i class=\"fa-solid fa-paw-claws\"> </i> ${!sameRow('other_name')}$!</h2>\n\n\n\n<p style=\"text-align:center;\"><i class=\"fa-solid fa-scroll\"><b> Description</b></i></p>\n\n<table class=\"npc_chat_card\"> \n<tr>\n  \n  <td class=\"chat-padding\">\n    <span>\n      ${!sameRow('details','')}$\n    </span>\n  </td>\n</tr>\n\n</table>",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label",
                                "align": "left",
                                "colName": ""
                              }
                            ],
                            "head": true,
                            "deleteWarning": true,
                            "predefinedLines": [],
                            "canPlayerAdd": true,
                            "type": "dynamicTable"
                          }
                        ],
                        "flow": "vertical",
                        "align": "center",
                        "type": "panel"
                      },
                      {
                        "key": "special",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "isSpecialRules == true",
                        "contents": [
                          {
                            "key": "",
                            "cssClass": "npc-font-color",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "label": null,
                            "defaultValue": null,
                            "size": "full-size",
                            "icon": "",
                            "value": "<i class=\"fa-solid fa-scroll\"> Special Rules</i>",
                            "prefix": "",
                            "suffix": "",
                            "rollMessage": "",
                            "altRollMessage": "",
                            "style": "label",
                            "type": "label"
                          },
                          {
                            "key": "special_list",
                            "cssClass": "npc_alt_background",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "rowLayout": [
                              {
                                "key": "icon",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "fa-solid  fa-scroll-old",
                                "value": "",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label",
                                "align": "left",
                                "colName": ""
                              },
                              {
                                "key": "special_name",
                                "cssClass": "alt_text_field_background",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": "",
                                "defaultValue": "",
                                "size": "m-large",
                                "charList": "",
                                "maxLength": "",
                                "type": "textField",
                                "align": "left",
                                "colName": "<b>Special Rules <b/>"
                              },
                              {
                                "key": "details",
                                "cssClass": null,
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": null,
                                "label": "",
                                "defaultValue": "",
                                "size": null,
                                "style": "dialog",
                                "type": "textArea",
                                "align": "left",
                                "colName": ""
                              },
                              {
                                "key": "roll",
                                "cssClass": "",
                                "role": "0",
                                "permission": "0",
                                "tooltip": "",
                                "visibilityFormula": "",
                                "label": null,
                                "defaultValue": null,
                                "size": "full-size",
                                "icon": "dice",
                                "value": "",
                                "prefix": "",
                                "suffix": "",
                                "rollMessage": "<h2 style=\"text-align:center;\"><i class=\"fa-solid fa-paw-claws\"> </i> ${!sameRow('special_name')}$!</h2>\n\n\n<table class=\"npc_chat_card\"> \n\n<tr>\n  \n  <td class=\"chat-padding\">\n    <span>\n      ${!sameRow('details','')}$\n    </span>\n  </td>\n</tr>\n\n</table>\n",
                                "altRollMessage": "",
                                "style": "label",
                                "type": "label",
                                "align": "left",
                                "colName": ""
                              }
                            ],
                            "head": true,
                            "deleteWarning": true,
                            "predefinedLines": [],
                            "canPlayerAdd": true,
                            "type": "dynamicTable"
                          }
                        ],
                        "flow": "vertical",
                        "align": "center",
                        "type": "panel"
                      }
                    ],
                    "name": "Combat",
                    "type": "tab"
                  },
                  {
                    "key": "npc_notes",
                    "cssClass": null,
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": null,
                    "contents": [
                      {
                        "key": "",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": null,
                        "contents": [
                          {
                            "key": "",
                            "cssClass": "npc-font-color",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "label": null,
                            "defaultValue": null,
                            "size": "full-size",
                            "icon": "",
                            "value": "<i class=\"fa-solid fa-note\"> Tactics & Notes</i>",
                            "prefix": "",
                            "suffix": "",
                            "rollMessage": "",
                            "altRollMessage": "",
                            "style": "label",
                            "type": "label"
                          },
                          {
                            "key": "",
                            "cssClass": "npc_alt_background",
                            "role": "0",
                            "permission": "0",
                            "tooltip": "",
                            "visibilityFormula": "",
                            "contents": [
                              [
                                {
                                  "key": "tactic_notes",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ]
                            ],
                            "cols": "1",
                            "rows": "1",
                            "layout": "",
                            "type": "table"
                          }
                        ],
                        "flow": "vertical",
                        "align": "center",
                        "type": "panel"
                      }
                    ],
                    "name": "Notes",
                    "type": "tab"
                  }
                ],
                "type": "tabbedPanel"
              }
            ]
          ],
          "cols": "1",
          "rows": "1",
          "layout": "",
          "type": "table"
        }
      ],
      "key": "custom_body",
      "cssClass": null,
      "role": 0,
      "permission": 0,
      "tooltip": null,
      "flow": null,
      "align": null,
      "type": "panel",
      "visibilityFormula": null
    },
    "display": {
      "width": "900",
      "height": "850",
      "fix_size": false,
      "pp_width": "250",
      "pp_height": "250"
    },
    "attributeBar": {},
    "activeEffects": {
      "slowFU": [
        {
          "priority": 0,
          "key": "dex_mod",
          "operator": "add",
          "formula": "-2"
        },
        {
          "priority": 0,
          "key": "isSlow",
          "operator": "set",
          "formula": "<i class=\"fa-solid fa-square-check\"> Slow</i>"
        }
      ],
      "dazedFU": [
        {
          "priority": 0,
          "key": "ins_mod",
          "operator": "add",
          "formula": "-2"
        },
        {
          "priority": 0,
          "key": "isDazed",
          "operator": "set",
          "formula": "<i class=\"fa-solid fa-square-check\"> Dazed</i>"
        }
      ],
      "weakFU": [
        {
          "priority": 0,
          "key": "mig_mod",
          "operator": "add",
          "formula": "-2"
        },
        {
          "priority": 0,
          "key": "isWeak",
          "operator": "set",
          "formula": "<i class=\"fa-solid fa-square-check\"> Weak</i>"
        }
      ],
      "shakenFU": [
        {
          "priority": 0,
          "key": "wlp_mod",
          "operator": "add",
          "formula": "-2"
        },
        {
          "priority": 0,
          "key": "isShaken",
          "operator": "set",
          "formula": "<i class=\"fa-solid fa-square-check\"> Shaken</i>"
        }
      ],
      "poisonedFU": [
        {
          "priority": 0,
          "key": "mig_mod",
          "operator": "add",
          "formula": "-2"
        },
        {
          "priority": 0,
          "key": "wlp_mod",
          "operator": "add",
          "formula": "-2"
        },
        {
          "priority": 0,
          "key": "isPoisoned",
          "operator": "set",
          "formula": "<i class=\"fa-solid fa-square-check\"> Poisoned</i>"
        }
      ],
      "enragedFU": [
        {
          "priority": 0,
          "key": "dex_mod",
          "operator": "add",
          "formula": "-2"
        },
        {
          "priority": 0,
          "key": "ins_mod",
          "operator": "add",
          "formula": "-2"
        },
        {
          "priority": 0,
          "key": "isEnraged",
          "operator": "set",
          "formula": "<i class=\"fa-solid fa-square-check\"> Enraged</i>"
        }
      ],
      "accelerateFU": [],
      "guardFU": [],
      "chargedFU": [],
      "spellchargedFU": [],
      "fedBacon": [],
      "blindFU": [],
      "fireVulFU": [],
      "sleepFU": [],
      "confuseFU": [],
      "refreshedInsFU": []
    },
    "activeConditionalModifierGroups": [],
    "templateSystemUniqueVersion": 3198236736
  },
  "flags": {
    "custom-system-builder": {
      "version": "2.3.1",
      "templateHistory": [
        [
          {
            "kind": "A",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents"
            ],
            "index": 6,
            "item": {
              "kind": "D",
              "lhs": {
                "key": "special",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "isSpecialRules == true",
                "contents": [
                  {
                    "key": "",
                    "cssClass": "npc-font-color",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "label": null,
                    "defaultValue": null,
                    "size": "full-size",
                    "icon": "",
                    "value": "<i class=\"fa-solid fa-scroll\"> Special Rules</i>",
                    "prefix": "",
                    "suffix": "",
                    "rollMessage": "",
                    "altRollMessage": "",
                    "style": "label",
                    "type": "label"
                  },
                  {
                    "key": "special_list",
                    "cssClass": "npc_alt_background",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "rowLayout": [
                      {
                        "key": "icon",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "",
                        "label": null,
                        "defaultValue": null,
                        "size": "full-size",
                        "icon": "fa-solid  fa-scroll-old",
                        "value": "",
                        "prefix": "",
                        "suffix": "",
                        "rollMessage": "",
                        "altRollMessage": "",
                        "style": "label",
                        "type": "label",
                        "align": "left",
                        "colName": ""
                      },
                      {
                        "key": "special_name",
                        "cssClass": "alt_text_field_background",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "",
                        "label": "",
                        "defaultValue": "",
                        "size": "m-large",
                        "charList": "",
                        "maxLength": "",
                        "type": "textField",
                        "align": "left",
                        "colName": "<b>Special Rules <b/>"
                      },
                      {
                        "key": "details",
                        "cssClass": null,
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": null,
                        "label": "",
                        "defaultValue": "",
                        "size": null,
                        "style": "dialog",
                        "type": "textArea",
                        "align": "left",
                        "colName": ""
                      },
                      {
                        "key": "roll",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "",
                        "label": null,
                        "defaultValue": null,
                        "size": "full-size",
                        "icon": "dice",
                        "value": "",
                        "prefix": "",
                        "suffix": "",
                        "rollMessage": "<h2 style=\"text-align:center;\"><i class=\"fa-solid fa-paw-claws\"> </i> ${!sameRow('special_name')}$!</h2>\n\n\n<table class=\"npc_chat_card\"> \n\n<tr>\n  \n  <td class=\"chat-padding\">\n    <span>\n      ${!sameRow('details','')}$\n    </span>\n  </td>\n</tr>\n\n</table>\n",
                        "altRollMessage": "",
                        "style": "label",
                        "type": "label",
                        "align": "left",
                        "colName": ""
                      }
                    ],
                    "head": true,
                    "deleteWarning": true,
                    "predefinedLines": [],
                    "canPlayerAdd": true,
                    "type": "dynamicTable"
                  }
                ],
                "flow": "vertical",
                "align": "center",
                "type": "panel"
              }
            }
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              5,
              "key"
            ],
            "lhs": "other_actions",
            "rhs": "special"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              5,
              "visibilityFormula"
            ],
            "lhs": "isOtherActions==true",
            "rhs": "isSpecialRules == true"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              5,
              "contents",
              1,
              "key"
            ],
            "lhs": "other_act_table",
            "rhs": "special_list"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              5,
              "contents",
              1,
              "rowLayout",
              3,
              "rollMessage"
            ],
            "lhs": "<h2>Uses <i class=\"fa-solid fa-paw-claws\"> </i> ${!sameRow('other_name')}$!</h2>\n\n\n\n<p style=\"text-align:center;\"><i class=\"fa-solid fa-scroll\"><b> Description</b></i></p>\n\n<table class=\"npc_chat_card\"> \n<tr>\n  \n  <td class=\"chat-padding\">\n    <span>\n      ${!sameRow('details','')}$\n    </span>\n  </td>\n</tr>\n\n</table>",
            "rhs": "<h2 style=\"text-align:center;\"><i class=\"fa-solid fa-paw-claws\"> </i> ${!sameRow('special_name')}$!</h2>\n\n\n<table class=\"npc_chat_card\"> \n\n<tr>\n  \n  <td class=\"chat-padding\">\n    <span>\n      ${!sameRow('details','')}$\n    </span>\n  </td>\n</tr>\n\n</table>\n"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              5,
              "contents",
              1,
              "rowLayout",
              1,
              "key"
            ],
            "lhs": "other_name",
            "rhs": "special_name"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              5,
              "contents",
              1,
              "rowLayout",
              1,
              "size"
            ],
            "lhs": "medium",
            "rhs": "m-large"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              5,
              "contents",
              1,
              "rowLayout",
              1,
              "colName"
            ],
            "lhs": "Other Actions",
            "rhs": "<b>Special Rules <b/>"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              5,
              "contents",
              1,
              "rowLayout",
              0,
              "cssClass"
            ],
            "lhs": null,
            "rhs": ""
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              5,
              "contents",
              1,
              "rowLayout",
              0,
              "visibilityFormula"
            ],
            "lhs": null,
            "rhs": ""
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              5,
              "contents",
              1,
              "rowLayout",
              0,
              "icon"
            ],
            "lhs": "fa-solid fa-gear",
            "rhs": "fa-solid  fa-scroll-old"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              5,
              "contents",
              0,
              "value"
            ],
            "lhs": "<i class=\"fa-solid fa-paw-claws\"> Other Actions</i>",
            "rhs": "<i class=\"fa-solid fa-scroll\"> Special Rules</i>"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "key"
            ],
            "lhs": "spells",
            "rhs": "other_actions"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "visibilityFormula"
            ],
            "lhs": "isSpells==true",
            "rhs": "isOtherActions==true"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "key"
            ],
            "lhs": "spell_list",
            "rhs": "other_act_table"
          },
          {
            "kind": "A",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout"
            ],
            "index": 8,
            "item": {
              "kind": "D",
              "lhs": {
                "key": "roll",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "label": null,
                "defaultValue": null,
                "size": "full-size",
                "icon": "dice",
                "value": "",
                "prefix": "",
                "suffix": "",
                "rollMessage": "${#word:='fa-star-of-david'}$\n\n${#target:= fetchFromActor('target',\"name\", '') }$\n${#targetRandom:=[#Nic and co.]}$\n\n<h2>Casts <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('spell_name'))}$ at ${!equalText(string(target),'') == true ?  targetRandom : target }$! </h2>\n\n\n<div class=\"npc_chat_card\">\n${!string(sameRow('details'))}$\n</div>\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Spell Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_mcheck')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'; background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n    <tr style=\"background-color:${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
                "altRollMessage": "${#word:='fa-star-of-david'}$\n\n<div style=\"display: none;\">\n  %{game.tables.getName(\"Nic and co. (AoE)\").resetResults()}% \n</div>\n\n${#targetRandom1:=[#Nic and co. (AoE)]}$\n${#targetRandom2:=[#Nic and co. (AoE)]}$\n${#targetRandom3:=[#Nic and co. (AoE)]}$\n\n<h2>Casts <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('spell_name'))}$ at ${!concat(targetRandom1, ', ', targetRandom2, ' and ', targetRandom3, '!')}$  </h2>\n\n<div class=\"npc_chat_card\">\n${!string(sameRow('details'))}$\n</div>\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Spell Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_mcheck')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
                "style": "label",
                "type": "label",
                "align": "left",
                "colName": ""
              }
            }
          },
          {
            "kind": "A",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout"
            ],
            "index": 7,
            "item": {
              "kind": "D",
              "lhs": {
                "key": "details",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "label": "",
                "defaultValue": "<table style=\"width: 100%; height: 51px;\" border=\"1\"><colgroup><col style=\"width: 18.5915%;\"><col style=\"width: 81.4085%;\"></colgroup>\n<tbody>\n<tr style=\"height: 17px;\">\n<td style=\"height: 17px;\"><strong>Target</strong></td>\n<td style=\"height: 17px;\">&nbsp;One creature/Up to 3 creatures/One equipped weapons/Self/Special</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"height: 17px;\"><strong>Cost</strong></td>\n<td style=\"height: 17px;\">&nbsp;MP</td>\n</tr>\n<tr>\n<td><strong>Duration</strong></td>\n<td>&nbsp;Instantaneous/Scene</td>\n</tr>\n</tbody>\n</table>\n<table border=\"1\"><colgroup><col></colgroup>\n<tbody>\n<tr>\n<td>Spell description here</td>\n</tr>\n</tbody>\n</table>",
                "size": null,
                "style": "dialog",
                "type": "textArea",
                "align": "left",
                "colName": "Details"
              }
            }
          },
          {
            "kind": "A",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout"
            ],
            "index": 6,
            "item": {
              "kind": "D",
              "lhs": {
                "key": "type",
                "cssClass": "alt_text_field_background",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "label": "",
                "defaultValue": "NA",
                "size": "m-small",
                "options": [
                  {
                    "key": "PHY",
                    "value": "Physical"
                  },
                  {
                    "key": "AIR",
                    "value": "Air"
                  },
                  {
                    "key": "BOL",
                    "value": "Bolt"
                  },
                  {
                    "key": "DAR",
                    "value": "Dark"
                  },
                  {
                    "key": "EAR",
                    "value": "Earth"
                  },
                  {
                    "key": "FIR",
                    "value": "Fire"
                  },
                  {
                    "key": "ICE",
                    "value": "Ice"
                  },
                  {
                    "key": "LIG",
                    "value": "Light"
                  },
                  {
                    "key": "POI",
                    "value": "Poison"
                  },
                  {
                    "key": "ALM",
                    "value": "Untyped"
                  },
                  {
                    "key": "NA",
                    "value": "-"
                  }
                ],
                "tableKey": null,
                "tableKeyColumn": null,
                "tableLabelColumn": null,
                "formulaKeyOptions": null,
                "formulaLabelOptions": null,
                "type": "select",
                "align": "center",
                "colName": "Type"
              }
            }
          },
          {
            "kind": "A",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout"
            ],
            "index": 5,
            "item": {
              "kind": "D",
              "lhs": {
                "key": "dmg_bonus",
                "cssClass": "alt_text_field_background",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "label": "",
                "defaultValue": "0",
                "size": "small",
                "allowDecimal": false,
                "minVal": "",
                "maxVal": "",
                "allowRelative": false,
                "showControls": false,
                "controlsStyle": "hover",
                "type": "numberField",
                "align": "center",
                "colName": "HR +"
              }
            }
          },
          {
            "kind": "A",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout"
            ],
            "index": 4,
            "item": {
              "kind": "D",
              "lhs": {
                "key": "check_bonus",
                "cssClass": "alt_text_field_background",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "label": "",
                "defaultValue": "0",
                "size": "small",
                "allowDecimal": false,
                "minVal": "",
                "maxVal": "",
                "allowRelative": false,
                "showControls": false,
                "controlsStyle": "hover",
                "type": "numberField",
                "align": "center",
                "colName": "M.Check"
              }
            }
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "key"
            ],
            "lhs": "attrib_2",
            "rhs": "roll"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "cssClass"
            ],
            "lhs": "alt_text_field_background",
            "rhs": ""
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "label"
            ],
            "lhs": "",
            "rhs": null
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "defaultValue"
            ],
            "lhs": "DEX",
            "rhs": null
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "size"
            ],
            "lhs": "small",
            "rhs": "full-size"
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "options"
            ],
            "lhs": [
              {
                "key": "DEX",
                "value": "Dex"
              },
              {
                "key": "INS",
                "value": "Ins"
              },
              {
                "key": "MIG",
                "value": "Mig"
              },
              {
                "key": "WLP",
                "value": "Wlp"
              },
              {
                "key": "NA",
                "value": "-"
              }
            ]
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "tableKey"
            ],
            "lhs": null
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "tableKeyColumn"
            ],
            "lhs": null
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "tableLabelColumn"
            ],
            "lhs": null
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "formulaKeyOptions"
            ],
            "lhs": null
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "formulaLabelOptions"
            ],
            "lhs": null
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "type"
            ],
            "lhs": "select",
            "rhs": "label"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "align"
            ],
            "lhs": "center",
            "rhs": "left"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "colName"
            ],
            "lhs": "Attr. 2",
            "rhs": ""
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "icon"
            ],
            "rhs": "dice"
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "value"
            ],
            "rhs": ""
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "prefix"
            ],
            "rhs": ""
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "suffix"
            ],
            "rhs": ""
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "rollMessage"
            ],
            "rhs": "<h2>Uses <i class=\"fa-solid fa-paw-claws\"> </i> ${!sameRow('other_name')}$!</h2>\n\n\n\n<p style=\"text-align:center;\"><i class=\"fa-solid fa-scroll\"><b> Description</b></i></p>\n\n<table class=\"npc_chat_card\"> \n<tr>\n  \n  <td class=\"chat-padding\">\n    <span>\n      ${!sameRow('details','')}$\n    </span>\n  </td>\n</tr>\n\n</table>"
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "altRollMessage"
            ],
            "rhs": ""
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              3,
              "style"
            ],
            "rhs": "label"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              2,
              "key"
            ],
            "lhs": "attrib_1",
            "rhs": "details"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              2,
              "cssClass"
            ],
            "lhs": "alt_text_field_background",
            "rhs": null
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              2,
              "visibilityFormula"
            ],
            "lhs": "",
            "rhs": null
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              2,
              "defaultValue"
            ],
            "lhs": "DEX",
            "rhs": ""
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              2,
              "size"
            ],
            "lhs": "small",
            "rhs": null
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              2,
              "options"
            ],
            "lhs": [
              {
                "key": "DEX",
                "value": "Dex"
              },
              {
                "key": "INS",
                "value": "Ins"
              },
              {
                "key": "MIG",
                "value": "Mig"
              },
              {
                "key": "WLP",
                "value": "Wlp"
              },
              {
                "key": "NA",
                "value": "-"
              }
            ]
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              2,
              "tableKey"
            ],
            "lhs": null
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              2,
              "tableKeyColumn"
            ],
            "lhs": null
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              2,
              "tableLabelColumn"
            ],
            "lhs": null
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              2,
              "formulaKeyOptions"
            ],
            "lhs": null
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              2,
              "formulaLabelOptions"
            ],
            "lhs": null
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              2,
              "type"
            ],
            "lhs": "select",
            "rhs": "textArea"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              2,
              "align"
            ],
            "lhs": "center",
            "rhs": "left"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              2,
              "colName"
            ],
            "lhs": "Attr. 1",
            "rhs": ""
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              2,
              "style"
            ],
            "rhs": "dialog"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              1,
              "key"
            ],
            "lhs": "spell_name",
            "rhs": "other_name"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              1,
              "colName"
            ],
            "lhs": "Spells",
            "rhs": "Other Actions"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              0,
              "icon"
            ],
            "lhs": "",
            "rhs": "fa-solid fa-gear"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              1,
              "rowLayout",
              0,
              "value"
            ],
            "lhs": "<i class=\"fa-solid fa-star\"></i>",
            "rhs": ""
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              4,
              "contents",
              0,
              "value"
            ],
            "lhs": "<i class=\"fa-solid fa-star-of-david\"> Offensive Spells</i>",
            "rhs": "<i class=\"fa-solid fa-paw-claws\"> Other Actions</i>"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "key"
            ],
            "lhs": "spells_copy1",
            "rhs": "spells"
          },
          {
            "kind": "A",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout"
            ],
            "index": 8,
            "item": {
              "kind": "N",
              "rhs": {
                "key": "roll",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "label": null,
                "defaultValue": null,
                "size": "full-size",
                "icon": "dice",
                "value": "",
                "prefix": "",
                "suffix": "",
                "rollMessage": "${#word:='fa-star-of-david'}$\n\n${#target:= fetchFromActor('target',\"name\", '') }$\n${#targetRandom:=[#Nic and co.]}$\n\n<h2>Casts <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('spell_name'))}$ at ${!equalText(string(target),'') == true ?  targetRandom : target }$! </h2>\n\n\n<div class=\"npc_chat_card\">\n${!string(sameRow('details'))}$\n</div>\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Spell Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_mcheck')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'; background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n    <tr style=\"background-color:${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
                "altRollMessage": "${#word:='fa-star-of-david'}$\n\n<div style=\"display: none;\">\n  %{game.tables.getName(\"Nic and co. (AoE)\").resetResults()}% \n</div>\n\n${#targetRandom1:=[#Nic and co. (AoE)]}$\n${#targetRandom2:=[#Nic and co. (AoE)]}$\n${#targetRandom3:=[#Nic and co. (AoE)]}$\n\n<h2>Casts <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('spell_name'))}$ at ${!concat(targetRandom1, ', ', targetRandom2, ' and ', targetRandom3, '!')}$  </h2>\n\n<div class=\"npc_chat_card\">\n${!string(sameRow('details'))}$\n</div>\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Spell Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_mcheck')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
                "style": "label",
                "type": "label",
                "align": "left",
                "colName": ""
              }
            }
          },
          {
            "kind": "A",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout"
            ],
            "index": 7,
            "item": {
              "kind": "N",
              "rhs": {
                "key": "details",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "label": "",
                "defaultValue": "<table style=\"width: 100%; height: 51px;\" border=\"1\"><colgroup><col style=\"width: 18.5915%;\"><col style=\"width: 81.4085%;\"></colgroup>\n<tbody>\n<tr style=\"height: 17px;\">\n<td style=\"height: 17px;\"><strong>Target</strong></td>\n<td style=\"height: 17px;\">&nbsp;One creature/Up to 3 creatures/One equipped weapons/Self/Special</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"height: 17px;\"><strong>Cost</strong></td>\n<td style=\"height: 17px;\">&nbsp;MP</td>\n</tr>\n<tr>\n<td><strong>Duration</strong></td>\n<td>&nbsp;Instantaneous/Scene</td>\n</tr>\n</tbody>\n</table>\n<table border=\"1\"><colgroup><col></colgroup>\n<tbody>\n<tr>\n<td>Spell description here</td>\n</tr>\n</tbody>\n</table>",
                "size": null,
                "style": "dialog",
                "type": "textArea",
                "align": "left",
                "colName": "Details"
              }
            }
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "key"
            ],
            "lhs": "roll",
            "rhs": "type"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "cssClass"
            ],
            "lhs": "",
            "rhs": "alt_text_field_background"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "label"
            ],
            "lhs": null,
            "rhs": ""
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "defaultValue"
            ],
            "lhs": null,
            "rhs": "NA"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "size"
            ],
            "lhs": "full-size",
            "rhs": "m-small"
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "icon"
            ],
            "lhs": "dice"
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "value"
            ],
            "lhs": ""
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "prefix"
            ],
            "lhs": ""
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "suffix"
            ],
            "lhs": ""
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "rollMessage"
            ],
            "lhs": "${#word:='fa-star-of-david'}$\n\n${#target:= fetchFromActor('target',\"name\", '') }$\n${#targetRandom:=[#Nic and co.]}$\n\n<h2>Casts <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('spell_name'))}$ at ${!equalText(string(target),'') == true ?  targetRandom : target }$! </h2>\n\n\n<div class=\"npc_chat_card\">\n${!string(sameRow('details'))}$\n</div>\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Spell Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_mcheck')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'; background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n    <tr style=\"background-color:${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>"
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "altRollMessage"
            ],
            "lhs": "${#word:='fa-star-of-david'}$\n\n<div style=\"display: none;\">\n  %{game.tables.getName(\"Nic and co. (AoE)\").resetResults()}% \n</div>\n\n${#targetRandom1:=[#Nic and co. (AoE)]}$\n${#targetRandom2:=[#Nic and co. (AoE)]}$\n${#targetRandom3:=[#Nic and co. (AoE)]}$\n\n<h2>Casts <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('spell_name'))}$ at ${!concat(targetRandom1, ', ', targetRandom2, ' and ', targetRandom3, '!')}$  </h2>\n\n<div class=\"npc_chat_card\">\n${!string(sameRow('details'))}$\n</div>\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Spell Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_mcheck')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>"
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "style"
            ],
            "lhs": "label"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "type"
            ],
            "lhs": "label",
            "rhs": "select"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "align"
            ],
            "lhs": "left",
            "rhs": "center"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "colName"
            ],
            "lhs": "",
            "rhs": "Type"
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "options"
            ],
            "rhs": [
              {
                "key": "PHY",
                "value": "Physical"
              },
              {
                "key": "AIR",
                "value": "Air"
              },
              {
                "key": "BOL",
                "value": "Bolt"
              },
              {
                "key": "DAR",
                "value": "Dark"
              },
              {
                "key": "EAR",
                "value": "Earth"
              },
              {
                "key": "FIR",
                "value": "Fire"
              },
              {
                "key": "ICE",
                "value": "Ice"
              },
              {
                "key": "LIG",
                "value": "Light"
              },
              {
                "key": "POI",
                "value": "Poison"
              },
              {
                "key": "ALM",
                "value": "Untyped"
              },
              {
                "key": "NA",
                "value": "-"
              }
            ]
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "tableKey"
            ],
            "rhs": null
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "tableKeyColumn"
            ],
            "rhs": null
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "tableLabelColumn"
            ],
            "rhs": null
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "formulaKeyOptions"
            ],
            "rhs": null
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              6,
              "formulaLabelOptions"
            ],
            "rhs": null
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              5,
              "key"
            ],
            "lhs": "details",
            "rhs": "dmg_bonus"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              5,
              "cssClass"
            ],
            "lhs": "",
            "rhs": "alt_text_field_background"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              5,
              "defaultValue"
            ],
            "lhs": "<table style=\"width: 100%; height: 51px;\" border=\"1\"><colgroup><col style=\"width: 18.5915%;\"><col style=\"width: 81.4085%;\"></colgroup>\n<tbody>\n<tr style=\"height: 17px;\">\n<td style=\"height: 17px;\"><strong>Target</strong></td>\n<td style=\"height: 17px;\">&nbsp;One creature/Up to 3 creatures/One equipped weapons/Self/Special</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"height: 17px;\"><strong>Cost</strong></td>\n<td style=\"height: 17px;\">&nbsp;MP</td>\n</tr>\n<tr>\n<td><strong>Duration</strong></td>\n<td>&nbsp;Instantaneous/Scene</td>\n</tr>\n</tbody>\n</table>\n<table border=\"1\"><colgroup><col></colgroup>\n<tbody>\n<tr>\n<td>Spell description here</td>\n</tr>\n</tbody>\n</table>",
            "rhs": "0"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              5,
              "size"
            ],
            "lhs": null,
            "rhs": "small"
          },
          {
            "kind": "D",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              5,
              "style"
            ],
            "lhs": "dialog"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              5,
              "type"
            ],
            "lhs": "textArea",
            "rhs": "numberField"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              5,
              "align"
            ],
            "lhs": "left",
            "rhs": "center"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              5,
              "colName"
            ],
            "lhs": "Details",
            "rhs": "HR +"
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              5,
              "allowDecimal"
            ],
            "rhs": false
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              5,
              "minVal"
            ],
            "rhs": ""
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              5,
              "maxVal"
            ],
            "rhs": ""
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              5,
              "allowRelative"
            ],
            "rhs": false
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              5,
              "showControls"
            ],
            "rhs": false
          },
          {
            "kind": "N",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              5,
              "controlsStyle"
            ],
            "rhs": "hover"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              4,
              "key"
            ],
            "lhs": "dmg_bonus",
            "rhs": "check_bonus"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              4,
              "colName"
            ],
            "lhs": "HR +",
            "rhs": "M.Check"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              0,
              "value"
            ],
            "lhs": "<i class=\"fa-solid fa-star-of-david\"> Supportive Spells</i>",
            "rhs": "<i class=\"fa-solid fa-star-of-david\"> Offensive Spells</i>"
          }
        ],
        null,
        [
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              1,
              "contents",
              1,
              "rowLayout",
              12,
              "rollMessage"
            ],
            "lhs": "${#word:=sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\n\n${#target:= fetchFromActor('target',\"name\", '') }$\n${#targetRandom:=[#Nic and co.]}$\n\n<h2>Attacks ${!equalText(string(target),'') == true ?  targetRandom : target }$ with <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('main_hand'))}$! </h2>\n\n<p>\n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'INS') == true and isZero(dice1) == true ? ref('ins_current') : dice1}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'MIG') == true and isZero(dice1) == true ? ref('mig_current') : dice1}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'WLP') == true and isZero(dice1) == true ? ref('wlp_current') : dice1}$ \n\n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'INS') == true and isZero(dice2) == true ? ref('ins_current') : dice2}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'MIG') == true and isZero(dice2) == true ? ref('mig_current') : dice2}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'WLP') == true and isZero(dice2) == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('main_attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p>\n<p><b>${!string(sameRow('main_attrib_2'))}$ </b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Attack Roll: ${D1+D2+sameRow('weapon1_mod')+ref('mod_acc')}$ HR: ${HR}$ + ${sameRow('weapon1_damage')}$ </strong></p> \n\n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'background-color:rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'background-color:rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'background-color:rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'background-color:rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'background-color:rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'background-color:rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'background-color:rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'background-color:rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'background-color:rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'; background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n<div style=\"text-align: center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align: center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n    <tr style=\"background-color:${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('weapon1_damage'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
            "rhs": "${#word:=sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\n\n\n<h2>Attacks with <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('main_hand'))}$! </h2>\n\n<p>\n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'INS') == true and isZero(dice1) == true ? ref('ins_current') : dice1}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'MIG') == true and isZero(dice1) == true ? ref('mig_current') : dice1}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'WLP') == true and isZero(dice1) == true ? ref('wlp_current') : dice1}$ \n\n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'INS') == true and isZero(dice2) == true ? ref('ins_current') : dice2}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'MIG') == true and isZero(dice2) == true ? ref('mig_current') : dice2}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'WLP') == true and isZero(dice2) == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('main_attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p>\n<p><b>${!string(sameRow('main_attrib_2'))}$ </b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Attack Roll: ${D1+D2+sameRow('weapon1_mod')+ref('mod_acc')}$ HR: ${HR}$ + ${sameRow('weapon1_damage')}$ </strong></p> \n\n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'background-color:rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'background-color:rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'background-color:rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'background-color:rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'background-color:rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'background-color:rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'background-color:rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'background-color:rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'background-color:rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'; background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n<div style=\"text-align: center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align: center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n    <tr style=\"background-color:${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('weapon1_damage'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              1,
              "contents",
              1,
              "rowLayout",
              12,
              "altRollMessage"
            ],
            "lhs": "${#word:=sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\n\n${#target:= fetchFromActor('target',\"name\", '') }$\n${#targetRandom:=[#Nic and co.]}$\n\n<h2>Attacks ${!equalText(string(target),'') == true ?  targetRandom : target }$ with <i class=\"fa-solid ${!string(word)}$\"></i> ${!string(sameRow('main_hand'))}$  using two-weapon fighting!&nbsp;</h2>\n\n<p>\n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'INS') == true and isZero(dice1) == true ? ref('ins_current') : dice1}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'MIG') == true and isZero(dice1) == true ? ref('mig_current') : dice1}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'WLP') == true and isZero(dice1) == true ? ref('wlp_current') : dice1}$ \n\n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'INS') == true and isZero(dice2) == true ? ref('ins_current') : dice2}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'MIG') == true and isZero(dice2) == true ? ref('mig_current') : dice2}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'WLP') == true and isZero(dice2) == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('main_attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$ </p> <p><b>${!string(sameRow('main_attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n\n<h4>\n<p><strong>Attack Roll: ${D1+D2+sameRow('weapon1_mod')+ref('mod_acc')}$ HR: 0 + ${sameRow('weapon1_damage')}$ </strong></p> \n<strong>\n\n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'background-color:rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'background-color:rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'background-color:rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'background-color:rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'background-color:rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'background-color:rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'background-color:rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'background-color:rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'background-color:rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n\n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(sameRow('weapon1_damage'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n\n</table>",
            "rhs": "${#word:=sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\n\n<h2>Attacks with <i class=\"fa-solid ${!string(word)}$\"></i> ${!string(sameRow('main_hand'))}$  using two-weapon fighting!&nbsp;</h2>\n\n<p>\n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'INS') == true and isZero(dice1) == true ? ref('ins_current') : dice1}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'MIG') == true and isZero(dice1) == true ? ref('mig_current') : dice1}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'WLP') == true and isZero(dice1) == true ? ref('wlp_current') : dice1}$ \n\n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'INS') == true and isZero(dice2) == true ? ref('ins_current') : dice2}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'MIG') == true and isZero(dice2) == true ? ref('mig_current') : dice2}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'WLP') == true and isZero(dice2) == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('main_attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$ </p> <p><b>${!string(sameRow('main_attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n\n<h4>\n<p><strong>Attack Roll: ${D1+D2+sameRow('weapon1_mod')+ref('mod_acc')}$ HR: 0 + ${sameRow('weapon1_damage')}$ </strong></p> \n<strong>\n\n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'background-color:rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'background-color:rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'background-color:rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'background-color:rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'background-color:rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'background-color:rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'background-color:rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'background-color:rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'background-color:rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n\n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(sameRow('weapon1_damage'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n\n</table>"
          }
        ],
        [
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              2,
              "contents",
              1,
              "rowLayout",
              9,
              "rollMessage"
            ],
            "lhs": "${#word:=sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\n\n${#target:= fetchFromActor('target',\"name\", '') }$\n${#targetRandom:=[#Nic and co.]}$\n\n<h2>Attacks ${!equalText(string(target),'') == true ?  targetRandom : target }$ with <i class=\"fa-solid ${!string(word)}$\"> </i> ${!sameRow('basic_name')}$</h2>\n\n<table class=\"npc_chat_card\">\n  <tr>\n    <td class=\"chat-padding\">\n         ${!sameRow('detail','')}$\n    </td>\n  </tr>\n</table>\n\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_acc')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'background-color:rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'background-color:rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'background-color:rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'background-color:rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'background-color:rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'background-color:rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'background-color:rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'background-color:rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'background-color:rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
            "rhs": "${#word:=sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\n\n\n<h2>Attacks  with <i class=\"fa-solid ${!string(word)}$\"> </i> ${!sameRow('basic_name')}$</h2>\n\n<table class=\"npc_chat_card\">\n  <tr>\n    <td class=\"chat-padding\">\n         ${!sameRow('detail','')}$\n    </td>\n  </tr>\n</table>\n\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_acc')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'background-color:rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'background-color:rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'background-color:rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'background-color:rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'background-color:rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'background-color:rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'background-color:rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'background-color:rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'background-color:rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              2,
              "contents",
              1,
              "rowLayout",
              9,
              "altRollMessage"
            ],
            "lhs": "${#word:=sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\n\n${#target:= fetchFromActor('target',\"name\", '') }$\n${#targetRandom:=[#Nic and co.]}$\n\n<h2>Attacks ${!equalText(string(target),'') == true ?  targetRandom : target }$ with <i class=\"fa-solid ${!string(word)}$\"> </i> ${!sameRow('basic_name')}$</h2>\n\n<table class=\"npc_chat_card\">\n  <tr>\n    <td class=\"chat-padding\">\n         ${!sameRow('detail','')}$\n    </td>\n  </tr>\n</table>\n\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n\n<p><strong>Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_acc')}$ HR: 0 + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'background-color:rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'background-color:rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'background-color:rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'background-color:rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'background-color:rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'background-color:rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'background-color:rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'background-color:rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'background-color:rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
            "rhs": "${#word:=sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\n\n\n<h2>Attacks with <i class=\"fa-solid ${!string(word)}$\"> </i> ${!sameRow('basic_name')}$</h2>\n\n<table class=\"npc_chat_card\">\n  <tr>\n    <td class=\"chat-padding\">\n         ${!sameRow('detail','')}$\n    </td>\n  </tr>\n</table>\n\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n\n<p><strong>Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_acc')}$ HR: 0 + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'background-color:rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'background-color:rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'background-color:rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'background-color:rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'background-color:rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'background-color:rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'background-color:rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'background-color:rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'background-color:rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>"
          }
        ],
        [
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              8,
              "rollMessage"
            ],
            "lhs": "${#word:='fa-star-of-david'}$\n\n${#target:= fetchFromActor('target',\"name\", '') }$\n${#targetRandom:=[#Nic and co.]}$\n\n<h2>Casts <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('spell_name'))}$ at ${!equalText(string(target),'') == true ?  targetRandom : target }$! </h2>\n\n\n<div class=\"npc_chat_card\">\n${!string(sameRow('details'))}$\n</div>\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Spell Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_mcheck')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'; background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n    <tr style=\"background-color:${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
            "rhs": "${#word:='fa-star-of-david'}$\n\n\n<h2>Casts <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('spell_name'))}$! </h2>\n\n\n<div class=\"npc_chat_card\">\n${!string(sameRow('details'))}$\n</div>\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Spell Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_mcheck')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'; background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n    <tr style=\"background-color:${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              8,
              "altRollMessage"
            ],
            "lhs": "${#word:='fa-star-of-david'}$\n\n<div style=\"display: none;\">\n  %{game.tables.getName(\"Nic and co. (AoE)\").resetResults()}% \n</div>\n\n${#targetRandom1:=[#Nic and co. (AoE)]}$\n${#targetRandom2:=[#Nic and co. (AoE)]}$\n${#targetRandom3:=[#Nic and co. (AoE)]}$\n\n<h2>Casts <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('spell_name'))}$ at ${!concat(targetRandom1, ', ', targetRandom2, ' and ', targetRandom3, '!')}$  </h2>\n\n<div class=\"npc_chat_card\">\n${!string(sameRow('details'))}$\n</div>\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Spell Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_mcheck')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
            "rhs": "${#word:='fa-star-of-david'}$\n\n<div style=\"display: none;\">\n  %{game.tables.getName(\"Nic and co. (AoE)\").resetResults()}% \n</div>\n\n<h2>Casts <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('spell_name'))}$</h2>\n\n<div class=\"npc_chat_card\">\n${!string(sameRow('details'))}$\n</div>\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Spell Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_mcheck')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>"
          }
        ],
        [
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              2,
              "contents",
              1,
              "rowLayout",
              9,
              "rollMessage"
            ],
            "lhs": "${#word:=sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\n\n\n<h2>Attacks  with <i class=\"fa-solid ${!string(word)}$\"> </i> ${!sameRow('basic_name')}$</h2>\n\n<table class=\"npc_chat_card\">\n  <tr>\n    <td class=\"chat-padding\">\n         ${!sameRow('detail','')}$\n    </td>\n  </tr>\n</table>\n\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_acc')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'background-color:rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'background-color:rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'background-color:rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'background-color:rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'background-color:rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'background-color:rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'background-color:rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'background-color:rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'background-color:rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
            "rhs": "${#word:=sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\n\n\n<h2>Attacks  with <i class=\"fa-solid ${!string(word)}$\"> </i> ${!sameRow('basic_name')}$!</h2>\n\n<table class=\"npc_chat_card\">\n  <tr>\n    <td class=\"chat-padding\">\n         ${!sameRow('detail','')}$\n    </td>\n  </tr>\n</table>\n\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_acc')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'background-color:rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'background-color:rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'background-color:rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'background-color:rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'background-color:rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'background-color:rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'background-color:rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'background-color:rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'background-color:rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>"
          },
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              2,
              "contents",
              1,
              "rowLayout",
              9,
              "altRollMessage"
            ],
            "lhs": "${#word:=sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\n\n\n<h2>Attacks with <i class=\"fa-solid ${!string(word)}$\"> </i> ${!sameRow('basic_name')}$</h2>\n\n<table class=\"npc_chat_card\">\n  <tr>\n    <td class=\"chat-padding\">\n         ${!sameRow('detail','')}$\n    </td>\n  </tr>\n</table>\n\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n\n<p><strong>Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_acc')}$ HR: 0 + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'background-color:rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'background-color:rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'background-color:rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'background-color:rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'background-color:rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'background-color:rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'background-color:rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'background-color:rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'background-color:rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
            "rhs": "${#word:=sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\n\n\n<h2>Attacks with <i class=\"fa-solid ${!string(word)}$\"> </i> ${!sameRow('basic_name')}$!</h2>\n\n<table class=\"npc_chat_card\">\n  <tr>\n    <td class=\"chat-padding\">\n         ${!sameRow('detail','')}$\n    </td>\n  </tr>\n</table>\n\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n\n<p><strong>Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_acc')}$ HR: 0 + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'background-color:rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'background-color:rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'background-color:rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'background-color:rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'background-color:rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'background-color:rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'background-color:rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'background-color:rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'background-color:rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>"
          }
        ],
        [
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              8,
              "altRollMessage"
            ],
            "lhs": "${#word:='fa-star-of-david'}$\n\n<div style=\"display: none;\">\n  %{game.tables.getName(\"Nic and co. (AoE)\").resetResults()}% \n</div>\n\n<h2>Casts <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('spell_name'))}$</h2>\n\n<div class=\"npc_chat_card\">\n${!string(sameRow('details'))}$\n</div>\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Spell Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_mcheck')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
            "rhs": "${#word:='fa-star-of-david'}$\n\n<div style=\"display: none;\">\n  %{game.tables.getName(\"Nic and co. (AoE)\").resetResults()}% \n</div>\n\n<h2>Casts <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('spell_name'))}$!</h2>\n\n<div class=\"npc_chat_card\">\n${!string(sameRow('details'))}$\n</div>\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Spell Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_mcheck')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>"
          }
        ],
        [
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              3,
              "contents",
              1,
              "rowLayout",
              8,
              "altRollMessage"
            ],
            "lhs": "${#word:='fa-star-of-david'}$\n\n<div style=\"display: none;\">\n  %{game.tables.getName(\"Nic and co. (AoE)\").resetResults()}% \n</div>\n\n<h2>Casts <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('spell_name'))}$!</h2>\n\n<div class=\"npc_chat_card\">\n${!string(sameRow('details'))}$\n</div>\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Spell Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_mcheck')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
            "rhs": "${#word:='fa-star-of-david'}$\n\n<div style=\"display: none;\">\n  %{game.tables.getName(\"Nic and co. (AoE)\").resetResults()}% \n</div>\n\n<h2>Casts <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('spell_name'))}$!</h2>\n\n<div class=\"npc_chat_card\">\n${!string(sameRow('details'))}$\n</div>\n\n\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'INS') == true ? ref('ins_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'MIG') == true ? ref('mig_current') : dice1}$\n${#dice1:= equalText(string(sameRow('attrib_1')) ,'WLP') == true ? ref('wlp_current') : dice1}$\n\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('attrib_2')) ,'INS') == true ? ref('ins_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'MIG') == true ? ref('mig_current') : dice2}$\n${#dice2:= equalText(string(sameRow('attrib_2')) ,'WLP') == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p> \n<p><b>${!string(sameRow('attrib_2'))}$</b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Spell Attack Roll: ${D1+D2+sameRow('check_bonus')+ref('mod_mcheck')}$ HR: ${HR}$ + ${string(sameRow('dmg_bonus'))}$ </strong></p> \n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('type')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ICE') == true ?'rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'FIR') == true ?'rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'AIR') == true ?'rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'BOL') == true ?'rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'EAR') == true ?'rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'LIG') == true ?'rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'DAR') == true ?'rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'POI') == true ?'rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'PHY') == true ?'rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('type')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('type')) ,'ALM') == true ?'background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('type')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n\n<div style=\"text-align:center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align:center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n  <tr style=\"background-color:${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('dmg_bonus'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>"
          }
        ],
        [
          {
            "kind": "E",
            "path": [
              "body",
              "contents",
              3,
              "contents",
              0,
              0,
              "contents",
              1,
              "contents",
              1,
              "contents",
              1,
              "rowLayout",
              12,
              "rollMessage"
            ],
            "lhs": "${#word:=sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\n\n\n<h2>Attacks with <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('main_hand'))}$! </h2>\n\n<p>\n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'INS') == true and isZero(dice1) == true ? ref('ins_current') : dice1}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'MIG') == true and isZero(dice1) == true ? ref('mig_current') : dice1}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'WLP') == true and isZero(dice1) == true ? ref('wlp_current') : dice1}$ \n\n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'INS') == true and isZero(dice2) == true ? ref('ins_current') : dice2}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'MIG') == true and isZero(dice2) == true ? ref('mig_current') : dice2}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'WLP') == true and isZero(dice2) == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('main_attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p>\n<p><b>${!string(sameRow('main_attrib_2'))}$ </b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Attack Roll: ${D1+D2+sameRow('weapon1_mod')+ref('mod_acc')}$ HR: ${HR}$ + ${sameRow('weapon1_damage')}$ </strong></p> \n\n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'background-color:rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'background-color:rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'background-color:rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'background-color:rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'background-color:rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'background-color:rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'background-color:rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'background-color:rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'background-color:rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'; background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n<div style=\"text-align: center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align: center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n    <tr style=\"background-color:${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('weapon1_damage'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>",
            "rhs": "${#word:=sameRow('is_ranged')?'fa-bow-arrow':'fa-swords'}$\n\n\n<h2>Attacks with <i class=\"fa-solid ${!string(word)}$\"> </i>${!string(sameRow('main_hand'))}$! </h2>\n\n<p>\n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'INS') == true and isZero(dice1) == true ? ref('ins_current') : dice1}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'MIG') == true and isZero(dice1) == true ? ref('mig_current') : dice1}$ \n${#dice1:= equalText(string(sameRow('main_attrib_1')) ,'WLP') == true and isZero(dice1) == true ? ref('wlp_current') : dice1}$ \n\n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'DEX') == true ? ref('dex_current') : 0}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'INS') == true and isZero(dice2) == true ? ref('ins_current') : dice2}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'MIG') == true and isZero(dice2) == true ? ref('mig_current') : dice2}$ \n${#dice2:= equalText(string(sameRow('main_attrib_2')) ,'WLP') == true and isZero(dice2) == true ? ref('wlp_current') : dice2}$\n\n<p><b>${!string(sameRow('main_attrib_1'))}$</b>: ${D1:=[1d:dice1:]}$</p>\n<p><b>${!string(sameRow('main_attrib_2'))}$ </b>: ${D2:=[1d:dice2:]}$</p>\n${#HR:=max(D1, D2)}$\n\n<p><strong>Attack Roll: ${D1+D2+sameRow('weapon1_mod')+ref('mod_acc')}$ HR: ${HR}$ + ${sameRow('weapon1_damage')}$ </strong></p> \n\n\n${#element:= ''}$\n${#element_bg:= ''}$\n${#element_icon:= ''}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'#2493e0':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'background-color:rgba(21, 137, 232, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'ICE') == true ?'fa-snowflake':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'#EA1518':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'background-color:rgba(235, 124, 21, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'FIR') == true ?'fa-fire':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'#359e31':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'background-color:rgba(155, 230, 25, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'AIR') == true ?'fa-wind':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'#EBFB04':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'background-color:rgba(232, 88, 23, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'BOL') == true ?'fa-bolt':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'#BEA141':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'background-color:rgba(239, 231, 16, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'EAR') == true ?'fa-mountains':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'#ffffff':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'background-color:rgba(0, 0, 0, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'LIG') == true ?'fa-sun':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'#000000':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'background-color:rgba(255, 255, 255, 0.70)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'DAR') == true ?'fa-moon-stars':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'#bd16b7':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'background-color:rgba(210, 104, 255, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'POI') == true ?'fa-skull-crossbones':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'#948b84':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'background-color:rgba(168, 161, 155, 0.4)':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'PHY') == true ?'fa-sword':element_icon}$\n\n${#element:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'transparent':element}$\n${#element_bg:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'; background-image: linear-gradient(to left, violet, indigo, blue, green, burlywood, orange, brown, red); -webkit-background-clip: text;':element_bg}$\n${#element_icon:=equalText(string(sameRow('weapon1_damagetype')) ,'ALM') == true ?'fa-meteor':element_icon}$\n\n<div style=\"text-align: center; color:green; font-size: 1.75em; font-weight: bolder\">\n  <strong>${! largerEq(D1, 6) and D1 == D2 ? string('CRITICAL!!!'): string('')}$ </strong>\n</div>\n     \n<div style=\"text-align: center; color:red; font-size: 1.75em; font-weight: bolder\">\n  <strong>${!D1 == D2 and D1 == 1 ? string('MISS!!!'): string('')}$ </strong>\n</div>\n\n<table>\n    <tr style=\"${!string(element_bg)}$;\">\n    <td class=\"damage_chat_card\"><span class=\"fa-solid\" style=\"color:${!string(element)}$; font-size: 2.25em; font-weight: bolder\"><em><strong> <i class=\"fa-solid ${!string(element_icon)}$\"></i> ${!string(HR+sameRow('weapon1_damage'))}$ </strong><span style=\"font-size: 0.75em; font-weight: bolder\"><strong> damage! </strong></span></em></span></td>\n  </tr>\n\n</table>"
          }
        ]
      ],
      "templateHistoryRedo": []
    },
    "exportSource": {
      "world": "fabula-ultima-as-above-so-below",
      "system": "custom-system-builder",
      "coreVersion": "11.315",
      "systemVersion": "3.0.0"
    }
  },
  "img": "icons/svg/mystery-man.svg",
  "prototypeToken": {
    "name": "_Fabula NPC template",
    "displayName": 0,
    "actorLink": false,
    "texture": {
      "src": "icons/svg/mystery-man.svg",
      "scaleX": 1,
      "scaleY": 1,
      "offsetX": 0,
      "offsetY": 0,
      "rotation": 0,
      "tint": null
    },
    "width": 1,
    "height": 1,
    "lockRotation": false,
    "rotation": 0,
    "alpha": 1,
    "disposition": -1,
    "displayBars": 50,
    "bar1": {
      "attribute": "attributeBar.hp_current"
    },
    "bar2": {
      "attribute": "attributeBar.mp_current"
    },
    "light": {
      "alpha": 0.5,
      "angle": 360,
      "bright": 0,
      "color": null,
      "coloration": 1,
      "dim": 0,
      "attenuation": 0.5,
      "luminosity": 0.5,
      "saturation": 0,
      "contrast": 0,
      "shadows": 0,
      "animation": {
        "type": null,
        "speed": 5,
        "intensity": 5,
        "reverse": false
      },
      "darkness": {
        "min": 0,
        "max": 1
      }
    },
    "sight": {
      "enabled": false,
      "range": 0,
      "angle": 360,
      "visionMode": "basic",
      "color": null,
      "attenuation": 0.1,
      "brightness": 0,
      "saturation": 0,
      "contrast": 0
    },
    "detectionModes": [],
    "flags": {
      "barbrawl": {
        "resourceBars": {
          "bar1": {
            "order": 0,
            "id": "bar1",
            "attribute": "attributeBar.hp_current",
            "mincolor": "#FF0000",
            "maxcolor": "#80FF00",
            "position": "bottom-inner",
            "otherVisibility": 0,
            "ownerVisibility": 50,
            "gmVisibility": -1,
            "hideFull": false,
            "hideEmpty": false,
            "hideCombat": false,
            "hideNoCombat": false,
            "indentLeft": null,
            "indentRight": null,
            "shareHeight": false,
            "style": "user",
            "label": "",
            "invert": false,
            "invertDirection": false,
            "subdivisions": null,
            "subdivisionsOwner": false,
            "fgImage": "",
            "bgImage": "",
            "opacity": null
          },
          "bar2": {
            "order": 1,
            "id": "bar2",
            "attribute": "attributeBar.mp_current",
            "mincolor": "#000080",
            "maxcolor": "#80B3FF",
            "position": "bottom-outer",
            "otherVisibility": 0,
            "ownerVisibility": 50,
            "gmVisibility": -1,
            "hideFull": false,
            "hideEmpty": false,
            "hideCombat": false,
            "hideNoCombat": false,
            "indentLeft": null,
            "indentRight": null,
            "shareHeight": false,
            "style": "user",
            "label": "",
            "invert": false,
            "invertDirection": false,
            "subdivisions": null,
            "subdivisionsOwner": false,
            "fgImage": "",
            "bgImage": "",
            "opacity": null
          }
        }
      }
    },
    "randomImg": false,
    "appendNumber": false,
    "prependAdjective": false
  },
  "items": [],
  "effects": [],
  "folder": "8RkbLPOQ6QdaLBSi",
  "_stats": {
    "systemId": "custom-system-builder",
    "systemVersion": "3.0.0",
    "coreVersion": "11.315",
    "createdTime": 1687192833754,
    "modifiedTime": 1700459816442,
    "lastModifiedBy": "Cdab6E6tDeyd5eNc"
  }
}